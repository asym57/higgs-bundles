\documentclass[12pt,letterpaper,reqno]{article}

% \usepackage{mathtools}
\usepackage{epsfig}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{indentfirst}
\usepackage{xspace}
\usepackage{multirow}
\usepackage{hyperref}
\usepackage{xcolor}
\usepackage{verbatim}
\usepackage[letterpaper,margin=1in,headheight=15pt]{geometry}
\usepackage{mathpazo}
\usepackage{tikz-cd}
\usepackage{booktabs}
\usepackage{framed}
\usepackage{float}
\usepackage{thmtools}
\usepackage{dashrule}
\usepackage[missing=]{gitinfo2}

\definecolor{darkred}{rgb}{0.5,0.1,0.1}
\definecolor{darkgreen}{rgb}{0.0,0.45,0.05}
\hypersetup{colorlinks=true,urlcolor=darkred,linkcolor=darkred,citecolor=darkred}
\definecolor{shadecolor}{rgb}{0.85,0.85,0.85}

% Bibliography formatting
\usepackage[bibstyle=authoryear-comp,labeldate=false,defernumbers=true,maxnames=20,firstinits=true,uniquename=init,dashed=false,backend=biber,sorting=none]{biblatex}

\DeclareNameAlias{sortname}{first-last}

\DeclareFieldFormat{url}{\url{#1}}
\DeclareFieldFormat[article]{pages}{#1}
\DeclareFieldFormat[inproceedings]{pages}{\lowercase{pp.}#1}
\DeclareFieldFormat[incollection]{pages}{\lowercase{pp.}#1}
\DeclareFieldFormat[article]{volume}{\textbf{#1}}
\DeclareFieldFormat[article]{number}{(#1)}
\DeclareFieldFormat[article]{title}{\MakeCapital{#1}}
\DeclareFieldFormat[inproceedings]{title}{#1}
\DeclareFieldFormat{shorthandwidth}{#1}

% Don't use "In:" in bibliography. Omit urls from journal articles.
\DeclareBibliographyDriver{article}{%
  \usebibmacro{bibindex}%
  \usebibmacro{begentry}%
  \usebibmacro{author/editor}%
  \setunit{\labelnamepunct}\newblock
  \MakeSentenceCase{\usebibmacro{title}}%
  \newunit
  \printlist{language}%
  \newunit\newblock
  \usebibmacro{byauthor}%
  \newunit\newblock
  \usebibmacro{byeditor+others}%
  \newunit\newblock
  \printfield{version}%
  \newunit\newblock
%  \usebibmacro{in:}%
  \usebibmacro{journal+issuetitle}%
  \newunit\newblock
  \printfield{note}%
  \setunit{\bibpagespunct}%
  \printfield{pages}
  \newunit\newblock
  \usebibmacro{eprint}
  \newunit\newblock
  \printfield{addendum}%
  \newunit\newblock
  \usebibmacro{pageref}%
  \usebibmacro{finentry}}

% Remove dot between volume and number in journal articles.
\renewbibmacro*{journal+issuetitle}{%
  \usebibmacro{journal}%
  \setunit*{\addspace}%
  \iffieldundef{series}
    {}
    {\newunit
     \printfield{series}%
     \setunit{\addspace}}%
  \printfield{volume}%
%  \setunit*{\adddot}%
  \printfield{number}%
  \setunit{\addcomma\space}%
  \printfield{eid}%
  \setunit{\addspace}%
  \usebibmacro{issue+date}%
  \newunit\newblock
  \usebibmacro{issue}%
  \newunit}


% Bibliography categories
\def\makebibcategory#1#2{\DeclareBibliographyCategory{#1}\defbibheading{#1}{\section*{#2}}}
\makebibcategory{books}{Books}
\makebibcategory{papers}{Refereed research papers}
\makebibcategory{chapters}{Book chapters}
\makebibcategory{conferences}{Papers in conference proceedings}
\makebibcategory{techreports}{Unpublished working papers}
\makebibcategory{bookreviews}{Book reviews}
\makebibcategory{editorials}{Editorials}
\makebibcategory{phd}{PhD thesis}
\makebibcategory{subpapers}{Submitted papers}
\makebibcategory{curpapers}{Current projects}

\setlength{\bibitemsep}{2.65pt}
\setlength{\bibhang}{.8cm}
\renewcommand{\bibfont}{\small}

\renewcommand*{\bibitem}{\addtocounter{papers}{1}\item \mbox{}\hskip-0.85cm\hbox to 0.85cm{\hfill\arabic{papers}.~~}}
\defbibenvironment{bibliography}
{\list{}
  {\setlength{\leftmargin}{\bibhang}%
   \setlength{\itemsep}{\bibitemsep}%
   \setlength{\parsep}{\bibparsep}}}
{\endlist}
{\bibitem}

\newenvironment{publications}{\section{\LARGE Publications}\label{papersstart}\vspace*{0.2cm}\small
\titlespacing{\section}{0pt}{1.5ex}{1ex}\itemsep=0.00cm
}{\label{papersend}\addtocounter{sumpapers}{-1}\refstepcounter{sumpapers}\label{sumpapers}}

\def\printbib#1{\printbibliography[category=#1,heading=#1]\lastref{sumpapers}}

% Counters for keeping track of papers
\newcounter{papers}\setcounter{papers}{0}
\newcounter{sumpapers}\setcounter{sumpapers}{0}
\def\lastref#1{\addtocounter{#1}{\value{papers}}\setcounter{papers}{0}}

% theorem environments
\declaretheoremstyle[spaceabove=0.25cm,spacebelow=0.25cm,notefont=\normalfont\bfseries, notebraces={(}{)}]{theorem}
\declaretheoremstyle[spaceabove=0.25cm,spacebelow=0.25cm,bodyfont=\normalfont,notefont=\normalfont\bfseries, notebraces={(}{)}]{noital}
\declaretheoremstyle[spaceabove=0.25cm,spacebelow=0.25cm,bodyfont=\normalfont\color{darkgreen},notefont=\normalfont\bfseries, notebraces={(}{)}]{green}
\declaretheoremstyle[spaceabove=0.25cm,spacebelow=0.25cm,bodyfont=\normalfont,notefont=\normalfont\bfseries,qed=$\qedsymbol$,notebraces={(}{)}]{proofstyle}


\declaretheorem[name=Theorem,numberwithin=section,style=theorem]{thm}
\declaretheorem[name=Proposition,sibling=thm,style=theorem]{prop}
\declaretheorem[name=Corollary,sibling=thm,style=theorem]{cor}
\declaretheorem[name=Lemma,sibling=thm,style=theorem]{lem}
\declaretheorem[name=Definition,sibling=thm,style=noital]{defn}
\declaretheorem[name=Example,sibling=thm,style=noital]{example}
\declaretheorem[name=Exercise,numberwithin=section,style=green]{exercise}
\declaretheorem[name=Proof,style=proofstyle,numbered=no]{pf}

\numberwithin{equation}{section}


% macros for convenience
\newcommand{\tops}{\texorpdfstring}

\newcommand{\nid}{\noindent}

\newcommand{\fa}{{\mathfrak a}}
\newcommand{\fp}{{\mathfrak p}}
\newcommand{\fk}{{\mathfrak k}}
\newcommand{\fg}{{\mathfrak g}}
\newcommand{\fh}{{\mathfrak h}}
\newcommand{\fn}{{\mathfrak n}}
\newcommand{\fq}{{\mathfrak q}}
\newcommand{\fm}{{\mathfrak m}}
\newcommand{\fr}{{\mathfrak r}}
\newcommand{\fu}{{\mathfrak u}}
\newcommand{\fG}{{\mathfrak G}}

\newcommand{\cC}{\ensuremath{\mathcal C}}
\newcommand{\cG}{\ensuremath{\mathcal G}}
\newcommand{\cB}{\ensuremath{\mathcal B}}
\newcommand{\cL}{\ensuremath{\mathcal L}}
\newcommand{\cS}{\ensuremath{\mathcal S}}
\newcommand{\cF}{\ensuremath{\mathcal F}}
\newcommand{\cK}{\ensuremath{\mathcal K}}
\newcommand{\cZ}{\ensuremath{\mathcal Z}}
\newcommand{\cM}{\ensuremath{\mathcal M}}
\newcommand{\cO}{\ensuremath{\mathcal O}}
\newcommand{\cH}{\ensuremath{\mathcal H}}
\newcommand{\cX}{\ensuremath{\mathcal X}}
\newcommand{\cY}{\ensuremath{\mathcal Y}}
\newcommand{\cA}{\ensuremath{\mathcal A}}
\newcommand{\cI}{\ensuremath{\mathcal I}}

\newcommand{\R}{\ensuremath{\mathbb R}}
\newcommand{\C}{\ensuremath{\mathbb C}}
\newcommand{\PP}{\ensuremath{\mathbb P}}
\newcommand{\Z}{\ensuremath{\mathbb Z}}
\newcommand{\Q}{\ensuremath{\mathbb Q}}
\newcommand{\A}{\ensuremath{\mathbb A}}
\newcommand{\bbH}{\ensuremath{\mathbb H}}
\newcommand{\bbI}{\ensuremath{\mathbb I}}
\newcommand{\bS}{\ensuremath{\mathbb S}}

\newcommand{\half}{\ensuremath{\frac{1}{2}}}
\newcommand{\qtr}{\ensuremath{\frac{1}{4}}}
\newcommand{\bq}{{\mathbf q}}
\newcommand{\N}{{\mathcal N}}
\newcommand{\F}{{\mathcal F}}
\newcommand{\HH}{{\mathcal H}}
\newcommand{\LL}{{\mathcal L}}
\newcommand{\RR}{{\mathcal R}}
\newcommand{\V}{{\mathcal V}}
\newcommand{\dirac}{\!\!\not\!\partial}
\newcommand{\Dirac}{\!\!\not\!\!D}
\newcommand{\cE}{{\mathcal E}}
\newcommand{\vs}{\not\!v}
\newcommand{\kahler}{K\"ahler\xspace}
\newcommand{\kq}{/\!\!/}
\newcommand{\kql}[1]{/\!\!/\!\!_#1\,}
\newcommand{\hk}{hyperk\"ahler\xspace}
\newcommand{\Hk}{Hyperk\"ahler\xspace}
\newcommand{\hkq}{/\!\!/\!\!/\!\!/}
\newcommand{\hkql}[1]{/\!\!/\!\!/\!\!/\!\!_#1\,}
\newcommand{\del}{\ensuremath{\partial}}
\newcommand{\delbar}{\ensuremath{\overline{\partial}}}
\newcommand{\I}{{\mathrm i}}
\newcommand{\J}{{\mathrm j}}
\newcommand{\K}{{\mathrm k}}
\newcommand{\e}{{\mathrm e}}
\newcommand{\de}{\mathrm{d}}
\newcommand{\ab}{\mathrm{ab}}
\newcommand{\vol}{\mathrm{vol}}
\renewcommand{\sf}{\mathrm{sf}}
\newcommand{\inst}{\mathrm{inst}}

\newcommand{\abs}[1]{\lvert#1\rvert}
\newcommand{\norm}[1]{\lVert#1\rVert}
\newcommand{\IP}[1]{\langle#1\rangle}
\newcommand{\DIP}[1]{\langle\!\langle#1\rangle\!\rangle}
\newcommand{\dwrt}[1]{\frac{\partial}{\partial#1}}
\newcommand{\eps}{\epsilon}
\newcommand{\simarrow}{\xrightarrow\sim}

\newcommand{\mmaref}[1]{}

\newcommand{\ti}[1]{\textit{#1}}

\DeclareMathOperator{\ad}{ad}
\DeclareMathOperator{\im}{Im}
\DeclareMathOperator{\re}{Re}
\DeclareMathOperator{\Tr}{Tr}
\DeclareMathOperator{\End}{End}
\DeclareMathOperator{\Hom}{Hom}
\DeclareMathOperator{\Aut}{Aut}
\DeclareMathOperator{\Sym}{Sym}
\DeclareMathOperator{\Lie}{Lie}
\DeclareMathOperator{\diag}{diag}
\DeclareMathOperator{\Bun}{Bun}
\DeclareMathOperator{\uharm}{UHarm}
\DeclareMathOperator{\Vect}{Vect}
\DeclareMathOperator{\Span}{Span}
\DeclareMathOperator{\grad}{grad}
\DeclareMathOperator{\rank}{rank}

\newcommand{\insfig}[2]{\begin{figure}[htbp] \centering \includegraphics[scale=#2]{figures/#1-crop.pdf} \label{fig:#1} \end{figure}}
% syntax: \insfig{name}{0.5}{caption}

\newcommand{\fixme}[1]{{\color{blue}{[#1]}}}
\newcommand{\currentposition}{{\color{blue} \noindent\makebox[\linewidth]{\hdashrule{\paperwidth}{1pt}{3mm}}}}

% \mathtoolsset{showonlyrefs}

\bibliography{higgs-bundles}

\begin{document}

\setcounter{page}{1}

{\noindent \tiny \color{gray} \tt \gitAuthorIsoDate \hfill
\gitAbbrevHash}

\begin{center} 
{\textbf {{Moduli of Higgs Bundles}}} \\
Preliminary draft
\end{center}

\tableofcontents
\renewcommand{\listtheoremname}{Quick reference}
\listoftheorems[onlynamed]

\section{Introductory motivation}

Suppose given a compact Riemann surface $C$
of genus $g \ge 2$ and a compact connected 
Lie group $G$, e.g. $G = U(1)$, $G = SU(2)$. 
Built from these data there is a
moduli space $$\cM = \cM^H(C,G)$$
It is \ti{almost} a manifold: it has some singularities, but also
some connected components without singularities, and 
at first we can focus on the parts without singularities.
It can be seen in various ways:

\begin{itemize}
\item $\cM$ is the (twisted) \ti{character variety}, i.e. moduli space of
(twisted) 
reductive representations\footnote{``Reductive'' means the closure of 
the image is a reductive subgroup of $G_\C$.}
$\pi_1(C) \to G_\C$.
e.g. for $g=2$ and $G = SU(2)$, 
this means
\begin{equation}
  \cM = \{ A_1,A_2,B_1,B_2 \in SL(2,\C): A_1 B_1 A_1^{-1} B_1^{-1} A_2 B_2 A_2^{-1} B_2^{-1} = \pm 1 \} / \sim
\end{equation}
\item $\cM$ is the moduli space parameterizing (stable) \ti{flat $G_\C$-connections}
over $C$. (Certain sheaves on this moduli space are 
basic objects on ``$B$ side'' of the geometric Langlands correspondence.)
\item $\cM$ is a partial compactification of $T^* \Bun(C,G)$, where $\Bun(C,G)$ is the moduli space of semistable $G$-bundles on $C$. (Lagrangian submanifolds are related to \ti{D-modules} on $\Bun(C,G)$, basic objects on ``$A$ side'' 
of the geometric Langlands correspondence.)
\insfig{higgs-bundles-2}{0.55}
\item $\cM$ is a \ti{complex integrable system} \cite{MR88i:58068}, i.e. a holomorphic
symplectic space fibered over a complex base with Lagrangian
fibers, generic fiber a compact complex torus. \insfig{higgs-bundles-1}{0.8}
\item $\cM$ is a noncompact \ti{Calabi-Yau space}, i.e. a \kahler
space admitting a Ricci-flat metric, in some sense a close 
cousin of the K3 surface; from this point of view
it is a paradigmatic example of the Strominger-Yau-Zaslow
philosophy \cite{Strominger:1996it}, 
which says that every Calabi-Yau space arises naturally
as a special Lagrangian \ti{torus fibration} over a complex base,
and that its \ti{mirror} can be obtained by a natural fiberwise duality
operation; moreover in this case the mirror is a space of the same kind,
namely $\cM^\vee = \cM^H(C,^L G)$ where 
$^L G$ is the \ti{Langlands dual} group \cite{mlh,MR2957305}.
(The mirror symmetry
exchanges the two sides of the geometric Langlands correspondence.)
\item $\cM$ is a \ti{cluster variety}, built by gluing together
very simple pieces $(\C^\times)^n$ in an essentially \ti{combinatorial} way. (Almost: to make this precisely true, we have to include \ti{punctures} on $C$; but even without the punctures, some cluster-like
structure seems to persist.)
\item $\cM$ is the space of solutions of an interesting PDE, \ti{Hitchin's equations} \cite{MR89a:32021}, containing as special cases various sorts of harmonic maps (including \ti{uniformization} in the case $G = PSU(2)$).
\end{itemize}

How can one space $\cM$ be so many different things at once?

A partial answer comes from another structure $\cM$ carries, namely
the \ti{\hk} structure. This says in short that $\cM$ has a 
metric compatible with many
different complex structures,
fitting together in a specific way; thus $\cM$ gives rise to
many complex manifolds which look quite different from one
another, but are nevertheless canonically diffeomorphic.
Loosely speaking, all these complex structures are generated 
by two basic ones: one of these comes from the complex structure
of the Riemann surface $C$, the other comes from the complex
structure of $G_\C$.

A \hk structure is rather rigid and gives a lot of constraints, e.g.
it implies that the metric on $\cM$ is Ricci-flat, and even lets 
us say some things about what the metric looks like (much
more than we can say for ``generic'' Ricci-flat metrics
or even Ricci-flat \kahler metrics);
it also allows us to study the \ti{topology} of $\cM$, e.g. 
its Betti numbers.

Our first major aim is to understand this structure --- first 
we will study some simpler ``baby'' examples of \hk geometry, then
we will study $\cM(C,G)$ for $G = U(1)$, finally we will
come to $\cM(C,G)$ for general $G$.

(A fuller answer should come from the way $\cM$
fits into supersymmetric quantum field theory; but this is 
mostly beyond the scope of this course.)


\section{Local symplectic, complex and \kahler geometry: a quick review}

This is only intended as a review, to fix notation, and to
give references for some facts we will need.

There are many references for the material on complex
and \kahler geometry: one
good one is \cite{MR2093043}.

In general ``manifold'' will mean a finite-dimensional smooth manifold.
Occasionally we will need to talk about infinite-dimensional
Banach manifolds, but then we will always say ``Banach manifold''
instead of just ``manifold.''


\subsection{Quotients}

\begin{prop} \label{prop:free-proper-quotients-are-manifolds} 
Suppose $X$ is a smooth manifold with a Lie group $G$
acting properly (inverse images of compact sets in $X$
are compact in $G \times X$)
and freely (stabilizers of all points in $X$ are trivial).
Let $\rho: \fg \to \Vect(X)$ be the infinitesimal action.
Then:
\begin{itemize}
\item The quotient $X / G$ (the set of $G$-orbits on $X$) 
has a natural structure of smooth manifold, compatible with
the quotient topology.
\item The differential of the projection $X \to X/G$ 
is surjective and gives an isomorphism
\begin{equation}
TX / \rho(\fg) \simeq T(X/G).
\end{equation}
\end{itemize}
\end{prop}

\insfig{higgs-bundles-10}{0.8}

Note that the requirement that the $G$-action be proper is 
important. One 
can easily construct non-Hausdorff quotients by letting $G$ be say
an infinite discrete group.
For a spectacularly bad example,
let $M$ be the torus $T^2 \simeq \R^2 / \Z^2$, and consider
the action of $\R$ by translations in an irrational direction,
e.g. let $t \in \R$ act by $(x,y) \mapsto (x+t,y+\sqrt{2}t)$. 
Then the quotient $T^2 / \R$ has the indiscrete topology,
so it is definitely not a manifold.
If $G$ is compact then the action is always proper.


\subsection{Symplectic manifolds}

\begin{defn}[Nondegenerate $2$-form]
Suppose $V$ is a vector space over $\R$ or $\C$.
We say $\omega \in \wedge^2(V)$ is \ti{nondegenerate}
if the map
\begin{align}
  V &\to V^* \\
  v &\mapsto \iota_v \omega = \omega(v,\cdot)
\end{align}
is an isomorphism.
\end{defn}

\begin{prop}[Standard basis for a nondegenerate $2$-form] 
\label{prop:standard-nondegenerate-2-form}
If $V$ is a finite-dimensional vector space over $\R$ or $\C$, and
$\omega \in \wedge^2(V)$ is nondegenerate, then $V$ has 
dimension $2n$ for some $n$, and there
exists a basis $\{e_1, \dots, e_n, f_1, \dots, f_n\}$ for $V$
such that
\begin{align}
\omega(e_i, f_j) &= \delta_{ij}, \\
\omega(e_i, e_j) &= 0, \\
\omega(f_i, f_j) &= 0.
\end{align}
\end{prop}

\begin{defn}[Symplectic manifold]
A \ti{symplectic manifold} is a pair $(X,\omega)$
where $X$ is a smooth manifold and
$\omega \in \Omega^2(X)$, such that
\begin{equation}
  \de \omega = 0
\end{equation}
and $\omega(x)$ is nondegenerate for every $x \in X$.
\end{defn}

\begin{example}[Cotangent bundle is a symplectic manifold]
If $X$ is any manifold and $Y = T^* X$, then $Y$ carries a canonical
$1$-form (``Liouville form''), $\lambda \in \Omega^1(Y)$,
defined as follows: 
\begin{equation}
  \lambda(x,p) \cdot v = p \cdot \pi_* v \qquad x \in X, p \in T^*_x X, v \in TY.
\end{equation}
In coordinates one would write 
$\lambda = p_i \de q^i$.
Then there is a canonical symplectic form 
\begin{equation}
\omega = \de \lambda.  
\end{equation}
In coordinates $\omega = \de p_i \wedge \de q^i$.
\end{example}



\subsection{Symplectic quotients}

\begin{defn}[Moment map]
Suppose $X$ is a symplectic manifold, with symplectic form $\omega$,
acted on by a real Lie group $G$, with Lie algebra
$\fg$. By differentiating the $G$-action at the identity,
we obtain a map
\begin{equation}
  \rho: \fg \to \Vect(X).
\end{equation}
Suppose given a function
\begin{equation} \label{eq:moment-map}
 \mu: X \to \fg^* 
\end{equation}
and for $Z \in \fg$ write $\mu_Z = \mu \cdot Z$.
We say $\mu$ is a \ti{moment map} for the $G$-action if 
for all $Z \in \fg$ we have
% \begin{equation}
%   \rho(Z) = \omega^{-1}(\de \mu_Z),
% \end{equation}
% i.e. for any $v \in \Vect(X)$
% \begin{equation}
%   \omega(\rho(Z), v) = v (\mu_Z),
% \end{equation}
% i.e.
\begin{equation} \label{eq:moment-map-condition-3}
  \iota_{\rho(Z)} \omega = \de \mu_Z,
\end{equation}
and in addition the map \eqref{eq:moment-map} is $G$-equivariant
(for the $G$-action on $X$ and the coadjoint $G$-action on $\fg^*$).
\end{defn}
In particular, the moment map $\mu$ 
\ti{determines} the $G$-action.

Note that moment maps do not always exist.
At the very least, the existence of a moment
map requires that $\iota_{\rho(Z)} \omega$ is closed
for all $Z \in \fg$, by \eqref{eq:moment-map-condition-3}. Using 
Cartan's ``magic formula''
\begin{equation} \label{eq:cartan-magic-formula}
  \cL_v \omega = \de (\iota_v \omega) + \iota_v (\de \omega)
\end{equation}
and the fact that $\de \omega = 0$,
this is equivalent to requiring $\cL_{\rho(Z)}\omega = 0$,
i.e. the $G$-action preserves $\omega$ infinitesimally.
But even if the $G$-action preserves $\omega$,
a moment map still may not exist.\footnote{When $G$ is compact, 
moment maps exist at least
\ti{locally} on $X$, though maybe not globally. When $G$ is not
compact there can even be a local obstruction.}

Conversely, if a moment map $\mu$ does exist and $\fg$
has nontrivial center, we can get another moment map by taking 
$\mu' = \mu + c$, where $c$ is fixed by the \ti{coadjoint}
action of $G$, i.e. $c \in [\fg,\fg]^\perp \subset \fg^*$.

\begin{exercise}
Suppose $X = \R^2$ with $\omega = \de x_1 \wedge \de x_2$, and
$G = SO(2) = U(1) = \{e^{\I \alpha}: \alpha \in \R \}$.
Then $\fu(1)$ is $1$-dimensional, spanned by $\partial_\alpha$.
Show that the counterclockwise rotation action of $U(1)$ on $X$, 
given by the matrices
\begin{equation}
   \begin{pmatrix} \cos \alpha & - \sin \alpha \\ \sin \alpha & \cos \alpha \end{pmatrix},
 \end{equation} 
has a moment map $\mu: \R^2 \to \fu(1)^*$, given by
\begin{equation}
  \mu(x_1,x_2) \cdot \partial_\alpha = -\half (x_1^2 + x_2^2).
\end{equation}
\end{exercise}
Thus if we identify $\fu(1) \simeq \R$ using the generator
$\partial_\alpha$, we can think of $\mu$ just as an $\R$-valued function
on $X$,
\begin{equation}
  \mu(x_1,x_2) = -\half (x_1^2 + x_2^2).
\end{equation}

\begin{exercise} \label{exc:cotangent-moment-map}
Suppose $X$ is any manifold, with a compact
group $G$ acting. Then $T^* X$ is a symplectic manifold
which also has a canonical action of $G$. Verify that
\begin{equation}
  \mu_Z(x,p) = -p \cdot (\rho(Z)(x)) \qquad x \in X, p \in T^*_x X
\end{equation}
gives a moment map for this action.
\end{exercise}

\begin{defn}[Symplectic quotient] \cite{MR0402819}
Suppose $X$ is a symplectic manifold, with a Lie group $G$
acting on it, with moment map $\mu$. Then the \ti{symplectic quotient}
is
\begin{equation}
  X \kq G = \mu^{-1}(0) / G.
\end{equation}
\end{defn}

More generally, for $c \in [\fg,\fg]^\perp$ we can define
\begin{equation}
  X \kql{c} G = \mu^{-1}(c) / G.
\end{equation}
(This is equivalent to changing our choice of $\mu$ to $\mu' = \mu+c$,
so there is no essential loss of generality in always taking $c = 0$,
but sometimes one or the other description is more convenient.)

\begin{prop}[Symplectic quotient is symplectic] \label{prop:symplectic-quotient-is-symplectic}
Suppose $X$ is a symplectic manifold, with a compact group $G$
acting on it, with moment map $\mu$.
If $G$ acts freely
on $\mu^{-1}(0)$, then $X \kq G$ is a manifold,
\begin{equation}
  \dim (X \kq G) = \dim X - 2 \dim G,
\end{equation}
and there is a symplectic form $\omega_{X \kq G}$
on $X \kq G$,
with the property
\begin{equation} \label{eq:symplectic-quotient-form}
  \pi^* \omega_{X \kq G} = \iota^* \omega
\end{equation}
where $\iota: \mu^{-1}(0) \hookrightarrow X$ is the inclusion.
\end{prop}
\begin{pf}
Let $Y = \mu^{-1}(0)$.
We want to show that $0$ is a regular value of $\mu$,
i.e. that $\de \mu: T_x X \to \fg^*$ is surjective
whenever $x \in Y$. This 
is equivalent to saying that for every $Z \in \fg$
we have $\de \mu_Z(x) \neq 0$.
But by \eqref{eq:moment-map-condition-3} this just means
that $\iota_{\rho(Z)} \omega \neq 0$,
which is true since $\rho(Z) \neq 0$ ($G$ acts freely)
and $\omega$ is nondegenerate.
Thus $Y$ is a submanifold of $X$,
with $\dim Y = \dim X - \dim G$.
$G$ is a compact group acting freely on $Y$.
Then by \autoref{prop:free-proper-quotients-are-manifolds}, 
$X \kq G = Y / G$ is also a manifold, of the desired 
dimension, and $T(X \kq G) = T(Y/G) = TY / \rho(\fg)$.

It remains to check that $\omega$ descends to a
symplectic form $\omega_{X \kq G}$. According
to \eqref{eq:symplectic-quotient-form} we should define
$\omega_{X \kq G}(v,w) = \omega(\tilde v, \tilde w)$
where $\pi_* \tilde v = v$, $\pi_* \tilde w = w$,
and $\tilde v$, $\tilde w$ $\in TY$.
Then:
\begin{itemize} 
\item $\omega_{X \kq G}$ is well defined
on $T(X \kq G) = T(Y/G)$: that means we want $\omega(v,w) = 0$
when $v = \rho(Z)$
for some $Z$, and $w \in TY$. This follows directly from
\eqref{eq:moment-map-condition-3}.
\item $\omega_{X \kq G}$ is nondegenerate on $T(X \kq G) = T(Y/G)$:
the symplectic orthogonal complement of $TY$ has dimension
$(\dim G)$, and contains $\rho(\fg)$ by
\eqref{eq:moment-map-condition-3}, so it must be equal
to $\rho(\fg)$. But this means that any vector which
annihilates all of $TY$ is zero in $T(Y/G)$, i.e.
$\omega$ is nondegenerate on $T(Y/G)$.
\item $\omega_{X \kq G}$ is closed on $Y/G$: 
letting $\pi: Y \to Y/G$ be the quotient map,
on $Y$ we have $\iota^* \omega = \pi^* \omega_{X \kq G}$,
so that $\de (\pi^* \omega_{X \kq G}) = 0$,
ie $\pi^* \de \omega_{X \kq G} = 0$.
Since $\pi$ is a submersion this implies
$\de \omega_{X \kq G} = 0$ as desired.
\end{itemize}
\end{pf}

The next exercise gives (perhaps) some motivation
for the notion of symplectic quotient:

\begin{exercise} Suppose $X$ is a smooth manifold
with a compact group $G$ acting freely. Let $\mu$
be the moment map of \autoref{exc:cotangent-moment-map}.
Show that $G$ acts freely on $\mu^{-1}(0)$ and
\begin{equation}
T^*X \kq G \simeq T^*(X/G)
\end{equation}
as symplectic manifolds. \fixme{check!}
\end{exercise}


\subsection{Complex manifolds} 
In this section $X$ is a smooth manifold.

\begin{defn}[Almost complex structure]
An \ti{almost complex structure} on $X$ is a smooth section $I$ of $\End(TX)$ with $I^2 = -1$. An \ti{almost complex manifold} is a pair $(X,I)$ where $I$ is an almost complex structure.
If $X$ has real dimension $2n$, an almost complex
structure $I$ equips $TX$ with the structure of
\ti{complex} vector bundle over $X$, of rank $n$,
and we say the \ti{complex dimension} $\dim_\C X$ is
$n$.
\end{defn}

\begin{example}[Flat complex space] $\C^n$ has a canonical almost complex structure $I$, as follows. Each tangent space $T_p \C^n \simeq \C^n$ canonically; $I$ is multiplication by $\I$, thought of as an 
endomorphism of the underlying $2n$-dimensional real vector space.
Writing $z_i = x_i + \I y_i$, and taking the coordinate basis
$\{\partial_{x_1}, \partial_{x_2}, \dots, \partial_{x_n}, \partial_{y_1}, \partial_{y_2}, \dots, \partial_{y_n}\}$ for for $T_p \C^n$, $I$ is represented by the matrix
\begin{equation}
   I = \begin{pmatrix} {\bf 0}_{n \times n} & -{\bf 1}_{n \times n} \\ {\bf 1}_{n \times n} & {\bf 0}_{n \times n} \end{pmatrix}.
\end{equation}
\end{example}

\begin{defn}[Holomorphic maps] \label{def:holomorphic-maps} If $(X,I_X)$ and $(Y,I_Y)$ are almost
complex manifolds, a \ti{holomorphic map} $\phi: X \to Y$
is one obeying
\begin{equation}
 I_Y \circ \de \phi = \de \phi \circ I_X.  
\end{equation}
\end{defn}

\begin{exercise} Show that, if both $(X,I_X)$ and $(Y,I_Y)$ are $\C$ with its canonical 
almost complex structure, \autoref{def:holomorphic-maps} becomes the standard
definition of holomorphic function (Cauchy-Riemann equations).
\end{exercise}

\begin{defn}[Antiholomorphic maps] \label{def:antiholomorphic-maps} If $(X,I_X)$ and $(Y,I_Y)$ are almost
complex manifolds, an \ti{antiholomorphic map} $\phi: X \to Y$
is a holomorphic map $(X,I_X) \to (Y,-I_Y)$.
\end{defn}

\begin{defn}[Complex structures] \label{def:complex-structures} An almost complex structure $I$ on $X$ is \ti{integrable}, 
or a \ti{complex structure}, if there is a covering of $X$ by open sets $U_\alpha$ with holomorphic diffeomorphisms $\phi_\alpha: U_\alpha \to V_\alpha \subset \C^n$ (where on $\C^n$ we take the
canonical almost complex structure.) A \ti{complex manifold} is an almost complex manifold $(X,I)$ with $I$ integrable.
\end{defn}

\begin{exercise} Show that \autoref{def:complex-structures} is equivalent to the usual definition of a complex manifold as a space
$X$ with a covering by charts $\phi_\alpha: U_\alpha \to \C^n$, where the transition maps are holomorphic (obey Cauchy-Riemann equations).
\end{exercise}

\begin{example}[Complex structure on $\C^n$] A tautological example is $X = \C^n$ itself with its 
canonical almost complex structure: just take a single open set $U = \C^n$, and $\phi: U \to \C^n$ to be the identity map. So the canonical almost complex structure on $\C^n$ is, tautologically, a
complex structure.
\end{example}

There are various equivalent ways of formulating the integrability condition. One which will be useful for us is:
\begin{prop}[Integrability means vanishing of Nijenhuis tensor] Define the \ti{Nijenhuis tensor} $N_I \in \Omega^0(\wedge^2 T^*X \otimes TX)$ as a map
$T^*X \otimes T^*X \to TX$ by
\begin{equation}
N_I(v,w) = [\tilde v,\tilde w] + I[\tilde v,I \tilde w] + I[I \tilde v, \tilde w] - [I\tilde v,I\tilde w],
\end{equation}
where $\tilde v$ and $\tilde w$ are any vector fields extending $v$, $w$.
Then $I$ is integrable if and only if
\begin{equation}
N_I = 0.  
\end{equation}
\end{prop}
\begin{pf} To show that integrability implies $N_I = 0$ is straightforward
by directly computing in a local coordinate chart. The other direction
is much harder --- it is the content of the Newlander-Nirenberg theorem.
\end{pf}

\subsection{Type decompositions}
Suppose $(X,I)$ is an almost complex manifold.
We have a decomposition
of $T_\C X = TX \otimes_\R \C$,
\begin{equation}
T_\C X = T^{1,0} X \oplus T^{0,1} X
  \end{equation}
where $T^{1,0} X$ and $T^{0,1} X$ are 
respectively the
$+\I$ and $-\I$ eigenspaces of $I$.
Both $TX$ and $T^{1,0}X$ are complex vector bundles 
of rank $n$; it is sometimes convenient to identify
them, by projection on the $(1,0)$ part.

\begin{exercise}
Show that this projection $\pi: TX \to T^{1,0}X$ indeed is an isomorphism 
of complex vector bundles. (This reduces essentially
to a question of linear algebra, concerning 
a vector space $V$ with complex structure $I$,
and its complexification $V_\C$.) If $X = \C$, 
what are $\pi(\partial_x)$ and $\pi(\partial_y)$?
\end{exercise}

There is also a dual decomposition
\begin{equation}
T^*_\C X = (T^*)^{1,0} X \oplus (T^*)^{0,1} X,
  \end{equation}
where $(T^*)^{1,0} X$ is the annihilator of
$T^{0,1} X$, and $(T^*)^{0,1} X$ is the annihilator of
$T^{1,0} X$.
This decomposition induces
\begin{equation}
\wedge^* T^*_\C X = \bigoplus_{p,q=0}^n \wedge^{p,q} T^* X , \qquad \Omega^*_\C X = \bigoplus_{p,q=0}^n \Omega^{p,q}(X).
\end{equation}

\begin{prop}[Integrability versus type decompositions] \label{prop:integrability}
Suppose $(X,I)$ is an almost complex manifold. The following are equivalent:
\begin{itemize}
\item $I$ is integrable.
\item There is a decomposition
\begin{equation}
\de = \partial + \bar\partial, \quad \partial: \Omega^{p,q}(X) \to \Omega^{p+1,q}(X), \quad \bar\partial: \Omega^{p,q}(X) \to \Omega^{p,q+1}(X).
\end{equation}
\item The distribution $T^{0,1}X$ is integrable: if $v$, $w$ are 
sections of $T^{0,1}X$ then $[v,w]$ is also a section of $T^{0,1}X$.
\end{itemize}
\end{prop}

Complex conjugation is an $\R$-linear map
$\Omega^{p,q}(X) \to \Omega^{q,p}(X)$;
thus it maps $\Omega^{p,p}(X)$ to itself;
we let $\Omega_\R^{p,p}(X)$ denote the fixed subspace.

\subsection{Holomorphic vector bundles}

In this section $(X,I)$ is always a complex manifold.

\begin{defn}[Holomorphic vector bundle] A \ti{holomorphic vector bundle} over $X$ is a complex vector bundle $E$ over $X$, equipped with an operator
\begin{equation}
  \bar\partial_E :  \Omega^{p,q}(E) \to \Omega^{p,q+1}(E)
\end{equation}
obeying
\begin{equation}
  \bar\partial_E (\alpha \psi) = (\bar\partial \alpha) \psi + (-1)^{\abs{\alpha}} \alpha \wedge \bar\partial_E \psi \qquad \alpha \in \Omega^*(X), \quad \psi \in \Omega^0(E)
\end{equation}
and the integrability condition
\begin{equation}
  \bar\partial_E^2 = 0.
\end{equation}
\end{defn}

It is useful to think of $\bar\partial_E$ as a kind of 
partially-defined flat connection, which allows us to differentiate
only in the $(0,1)$ ``directions.''
The structure of holomorphic vector bundle is much 
more rigid than that of a merely complex vector bundle.
We emphasize that this structure makes sense only when $X$ is 
a complex manifold, while complex vector bundles make sense 
over any $X$.

\begin{prop}[Equivalence of definitions of holomorphic vector bundle] A structure of holomorphic vector bundle on $E$ is equivalent to a maximal atlas 
of preferred trivializations of $E$, such that
the transition maps 
$U_\alpha \cap U_\beta \to GL(r,\C)$ 
are holomorphic. 
\end{prop}
\begin{pf}
This is a sort of linear analogue of the 
Newlander-Nirenberg theorem; for a proof see 
\cite{MR1079726} Theorem 2.1.53, proven in Section 2.2.
\end{pf}

% \begin{example} The trivial bundle $X \times \C^r$
% carries a canonical holomorphic structure.
% \end{example}

\begin{example}[Tangent bundle as a holomorphic bundle] The tangent bundle $TX$ carries
a canonical structure of holomorphic vector bundle.
Indeed, the holomorphic charts $\phi_\alpha = (z_1, \dots, z_n)$ 
give rise to preferred trivializations corresponding 
to the bases $\{\partial_{z_1}, \dots, \partial_{z_n} \}$
for $T^{1,0} X \simeq TX$, and the transition 
maps are given by the Jacobian matrices 
$(\partial z'_i / \partial z_j)_{i,j=1}^n$, which are holomorphic.
% It can be described as follows: for each coordinate
% chart $\phi_\alpha: U \to \C^n$, we get an isomorphism
% $\de \phi_\alpha: TU \to T \C^n$, and under this 
% isomorphism $\bar\partial_{TX}$ is identified
% with the canonical holomorphic structure.
\end{example}

\begin{defn}[Connection compatible with holomorphic structure]
If $E$ is a holomorphic vector bundle over $X$,
a connection $D$ in $E$ is \ti{compatible with the
holomorphic structure} if, for all 
$\psi \in \Omega^0(E)$, the $(0,1)$ part of $D \psi$ 
is $\bar\partial_E \psi$.
\end{defn}

\begin{defn}[Chern connection] \label{def:chern-connection}
If $E$ is a holomorphic vector bundle over $X$ with
a Hermitian metric $h$, the \ti{Chern connection} 
in $E$ is the unique connection which is 
$h$-unitary and compatible with the holomorphic
structure.
\end{defn}

\begin{exercise} Show that \autoref{def:chern-connection} makes
sense, i.e. that there indeed \ti{is} a unique
connection in $E$ with the claimed properties.
\end{exercise}

\subsection{Hermitian and \kahler metrics}
Throughout this section $(X,I)$ is an almost complex manifold.

\begin{defn}[Hermitian metric on complex manifold] A Hermitian metric on 
$(X,I)$ is a Riemannian metric $g$ obeying
$$ g(v,w) = g(Iv,Iw). $$
Equivalently, with respect to the decomposition 
\begin{equation}
  \Sym^2 (T_\C X) = \Sym^{2,0} TX \oplus \Sym^{1,1} TX \oplus \Sym^{0,2} TX,
\end{equation}
we have $g \in \Sym^{1,1} TX$, i.e. $g$ is of ``type $(1,1)$.''
\end{defn}

\begin{defn}[Fundamental form] If $g$ is a Hermitian metric on $(X,I)$, 
the \ti{fundamental form} $\omega \in \Omega^{1,1}_\R(X)$
is
\begin{equation}
  \omega(v,w) = g(Iv,w).
\end{equation}
\end{defn}

\begin{defn}[Positive form] If $\omega \in \Omega^{1,1}_\R(X)$,
$\omega$ is \ti{positive} if the symmetric pairing
\begin{equation}
   g(v,w) = \omega(v,Iw)
\end{equation} 
is positive definite.
\end{defn}

Naturally, if $g$ is an honest Hermitian metric, then the
associated fundamental form is positive.

\begin{exercise} If $g$ is a Hermitian metric on $(X,I)$ check that
\begin{equation}
  {\mathrm {vol}}_g = \frac{\omega^n}{n!}
\end{equation}
\end{exercise}

The term ``Hermitian'' might seem confusing here since $g$ is just 
an ordinary real-valued metric on the real vector bundle 
$TX$. The following should help:

\begin{exercise} \label{exc:hermitian-metric} 
If $g$ is a Hermitian metric on $(X,I)$,
verify that
\begin{equation}
  h = g - \I \omega
\end{equation}
defines a Hermitian metric
on the complex vector bundle $TX$.
(Our convention is that Hermitian metrics are
$\C$-linear in the \ti{first} slot.)
\end{exercise}

Let $\nabla$ denote the 
Levi-Civita connection on $TX$ induced
by the metric $g$.

\begin{defn}[\kahler metric] If $g$ is a Hermitian metric 
on $(X,I)$, we say $g$ is \ti{\kahler} if
\begin{equation}
  \nabla I = 0.
\end{equation}
Then $(X,g,I)$ is a \ti{\kahler manifold},
and $\omega$ is the \ti{\kahler form}.
\end{defn}

\begin{example}[Standard metric on $\C$ is \kahler] 
Take $X=\C$ with coordinate $z = x + \I y$, $I$ the standard complex structure,
and $g$ the standard Riemannian metric, $g = \de x^2 + \de y^2$.
Evidently $\nabla I = 0$, so this is a \kahler metric.
The \kahler form is
\begin{equation}
  \omega = \de x \wedge \de y = \frac{\I}{2} \de z \wedge \de \bar{z}.
\end{equation}
\end{example}

The \kahler property has various useful alternative 
characterizations:
% \begin{prop}[\kahler means covariant constancy of $I$]
% If $g$ is a Hermitian metric on $X$,
% $g$ is \kahler if and only if
% $\nabla I = 0$.
% \end{prop}

\begin{prop}[Characterizations of \kahler metrics] \label{cor:kahler-cc}
If $g$ is a Hermitian metric on $(X,I)$, with 
fundamental form $\omega$, then the following are
equivalent:
\begin{enumerate}
  \item $g$ is \kahler,
  \item $\nabla I = 0$,
  \item $\nabla \omega = 0$,
  \item $I$ is integrable and $\nabla$ agrees with the Chern connection on $TX$,
  when we view $TX$ as a holomorphic vector bundle, with the induced Hermitian 
  metric $h$ of \autoref{exc:hermitian-metric},
  \item $I$ is integrable and $\de \omega = 0$.
\end{enumerate}
\end{prop}

\begin{pf} As we defined \kahler we have 
automatically $(1) \Leftrightarrow (2)$. 
Using $\nabla g = 0$ we easily obtain $(2) \Leftrightarrow (3)$.
So all of $(1)$-$(3)$ are equivalent.

Now we consider $(4)$.
To show $(2)$ implies integrability of $I$,
note that for $v,w$ sections of $T^{0,1} X$ we have
(using the torsion-free property of $\nabla$ and
$\nabla I = 0$)
\begin{equation}
  I[v,w] = I(\nabla_v w - \nabla_w v) = \nabla_v(Iw) - \nabla_w(Iv) = -\I (\nabla_v w - \nabla_w v) = -\I [v,w],
\end{equation}
so by \autoref{prop:integrability} $I$ is
integrable. Also $(2)$ implies that
for $v \in TX$ and $w$ a section of $T^{1,0} X$
we have $I (\nabla_v w) = \nabla_v (Iw) = \I \nabla_v w$,
so that $\nabla_v w$ is also a section of $T^{1,0} X$;
this means $\nabla$ is compatible with the holomorphic
structure.
Finally $(2)+(3)$ implies $\nabla h = 0$.
So we have shown that $(2) \Rightarrow (4)$.
Conversely, we have easily $(4) \Rightarrow (3)$,
since $\omega$ is the imaginary part of $h$.
Thus, all of $(1)$-$(4)$ are equivalent.

Finally we consider $(5)$. We already showed that
$(2)$ implies integrability of $I$. Also
$(3)$ immediately implies $\de \omega = 0$.
Thus we have $(2)+(3) \Rightarrow (5)$.
All that remains is to see that $(5) \Rightarrow (4)$,
which is the most interesting part. This amounts to verifying
that the Chern connection is torsion-free (then it will have
to agree with $\nabla$, since $\nabla$ is the unique connection
in $TX$ which is torsion-free and has $\nabla g = 0$.) \fixme{...}
\end{pf}


In particular \autoref{cor:kahler-cc} implies that any complex 
submanifold of a \kahler manifold is again \kahler. Combining this 
with the fact that $\C\PP^n$ admits a \kahler metric
(Fubini-Study), we obtain a huge supply of examples.

\begin{prop}[Ricci form for \kahler manifold is
curvature of canonical bundle] \label{prop:ricci-form-canonical}
If $(X,I,g)$ is \kahler, the 
Ricci form $R(v,w) = Ric(Iv,w)$ is equal to the curvature of the
induced Hermitian metric on the canonical line 
bundle $K = \wedge^{n,0} T^*X$. 
\end{prop}

Finally we quickly recall the notion of special holonomy. Recall that for any Riemannian metric $g$ the parallel transport of Levi-Civita preserves $g$, so that 
for any $p \in X$ the holonomy group $Hol_\nabla(p) \subset GL(T_p X)$ 
is contained in the subgroup $O(g(p)) \simeq O(2n)$.
For a \kahler metric, \autoref{cor:kahler-cc} says
the parallel transport of Levi-Civita preserves the Hermitian metric
$h$ on the complex vector bundle $TX$. Thus, for any $p \in X$, the holonomy group
$Hol_\nabla(p) \subset GL(T_p X)$ is contained in the smaller group $U(h(p)) \simeq U(n)$.
Conversely, if $Hol_\nabla(p)$ is contained in some subgroup 
isomorphic to $U(n)$ then it preserves some $h$, from 
which one can prove:

\begin{prop}[Special holonomy of \kahler manifolds] Given any Riemannian metric $g$ on a manifold $M$ of dimension $2n$, $g$ is a \kahler metric 
(for some complex structure $I$ on $M$) if and only if
the holonomy group at a point is contained in
a subgroup isomorphic to $U(n)$.
\end{prop}


\subsection{\kahler quotients}

\begin{defn}[Horizontal vectors]
Suppose $X$ is a Riemannian manifold, with a Lie group
$G$ acting freely on $X$.
The \ti{horizontal distribution} on $X$ is
\begin{equation}
  H = \{ \rho(Z): Z \in \fg \}^\perp \subset TX.
\end{equation}
\end{defn}

\begin{defn}[Induced metric on a quotient]
Suppose $X$ is a Riemannian manifold, with a compact group
$G$ acting freely on $X$ preserving $g$.
Using orthogonal projection we have
a canonical identification
\begin{equation}
  T(X/G) = TX / \rho(\fg) \simeq H.
\end{equation}
The \ti{induced metric} on $X/G$ is $g \vert_H$.
This is a Riemannian metric on $X/G$.
(Note that it is well defined
because $g$ is $G$-invariant.)
\end{defn}

\begin{prop}[Symplectic quotients of \kahler manifolds 
are \kahler] \label{prop:kahler-quotients-are-kahler} 
Suppose $X$ is a \kahler manifold, with a compact group
$G$ acting on $X$ preserving both $g$ and $I$ (thus it
also preserves $\omega$), with a moment map $\mu$,
and such that $G$ acts freely on $Y = \mu^{-1}(0)$.
Then the induced metric on the symplectic quotient $X \kq G$
is \kahler.
\end{prop}
\begin{pf} First we want to see that there is a natural 
almost complex structure on $X \kq G$. The tangent space
$T(X \kq G)$ is
\begin{align}
  T(X \kq G) &= T(Y / G)  \\
  &= \{ \rho(Z): Z \in \fg \}^\perp \subset TY \\
  &= 
  \left(\{ \grad \mu_Z: Z \in \fg \} \oplus \{ \rho(Z): Z \in \fg \}\right)^\perp \subset TX.
\end{align}
But 
\begin{equation}
  g(\grad \mu_Z, v) = \de \mu_Z \cdot v = \omega(\rho(Z),v) = g(I \rho(Z), v)
\end{equation}
so 
\begin{equation}
 \grad \mu_Z = I \rho(Z). 
\end{equation}
Since $I$ acts orthogonally,
it follows that $T(X \kq G)$ is preserved by $I$.

Now we need to check that the Levi-Civita connection
$\nabla^{X \kq G}$ on $T(X \kq G)$ preserves $I$.
$\nabla^{X \kq G}$ can be obtained
by starting with the Levi-Civita connection $\nabla^X$, restricting
to a connection in $TX$ over $Y = \mu^{-1}(0)$, and then 
projecting orthogonally to $T(X \kq G)$, i.e. for
$v,w \in \Vect(X \kq G) \subset \Vect(X)$,
\begin{equation}
\nabla_w^{X \kq G} (v) = \pi(\nabla_w^X v)
\end{equation}
(To see this, one needs to check that this formula indeed
gives a metric-compatible and torsion-free connection.) Then 
the desired statement follows from the fact that $I$ is covariantly
constant for $\nabla^X$ and commutes with $\pi$.
\end{pf}

Infinitesimally what we have just done is to 
identify $T(X \kq G)$ with the orthocomplement
of the space generated by 
vectors $\rho(Z)$ and $I \rho(Z)$, for $Z \in \fg$.
There is another way of thinking about this:
these vector fields generate a copy of the \ti{complexified}
Lie algebra $\fg_\C$ inside of $\Vect(X)$.
So infinitesimally it looks as if we are
taking an ordinary quotient, but a quotient
by some complexification $G_\C$ rather than
the original $G$. 
Thus we might dream that as complex manifolds we would have
\begin{equation}
  X \kq G = X / G_\C.
\end{equation}
If this were literally true it would give an ``easy'' way of thinking about
the complex structure on $X \kq G$.
But if we try to realize this dream literally, we will run into 
problems, since there is no reason for the vector fields
$I \rho(Z)$ on $X$ to be complete: thus we cannot necessarily
integrate them to a group action.
Even if they are complete, 
we can still have problems, because $G_\C$ 
is not a compact group, so $X / G_\C$
is not guaranteed to be a nice space.
The next example
explores this a bit.

\begin{example}[Projective space as a \kahler quotient]
Take $X = \C^n$ with its standard \kahler metric, for
which
\begin{equation}
\omega = \frac{\I}{2} \sum_i \de z_i \wedge \de \bar{z}_i.
\end{equation}
This $\omega$ is preserved by the $U(1)$ action simultaneously
rotating all $z_i$,
\begin{equation}
  z_i \mapsto e^{\I \alpha} z_i,
\end{equation}
with moment map (identifying $\fu(1) \simeq \R$ as usual)
\begin{equation}
  \mu = - \half \sum_{i=1}^n \abs{z_i}^2 + c,
\end{equation}
where $c \in \R$ is arbitrary.

Now we consider the symplectic quotient $X \kq U(1)$. If $c = 0$
then $U(1)$ does not act freely on $\mu^{-1}(0)$. If $c < 0$ then $0$
is a regular value, but in a trivial way: $\mu^{-1}(0)$ is empty.
The interesting case is $c > 0$, in which case
\begin{equation}
  \mu^{-1}(0) = \left\{ \sum \abs{z_i}^2 = 2c \right\} \simeq S^{2n-1}
\end{equation}
and dividing out by $U(1)$ gives (at least as a set) $\C\PP^{n-1}$.
\end{example}

\begin{exercise}
Check that the induced complex structure on $\C^n \kq U(1)$,
promised by \autoref{prop:kahler-quotients-are-kahler}, is indeed
the standard one on $\C\PP^{n-1}$. How does changing
the choice of $c$ change the \kahler structure?
\end{exercise}

Following the philosophy we just described, instead of taking
$\C^n \kq U(1)$ we could try to take $\C^n / \C^\times$.
This quotient is badly behaved (non-Hausdorff) as it stands, because of the
point $0 \in \C^n$, but we certainly do have
\begin{equation}
  (\C^n \setminus \{0\}) / \C^\times = \C\PP^{n-1} = \C^n \kq U(1).
\end{equation}
The ``explanation'' of this phenomenon is that each 
$\C^\times$-orbit on $X$ meets $\mu^{-1}(0)$ in
exactly one $U(1)$-orbit, 
except for the orbit $\{0\}$ which does not 
meet $\mu^{-1}(0)$ at all, and thus must be thrown out 
if we want to compare with $X \kq G$.

Now more generally, how should we compare $X \kq G$ and $X / G_\C$?
They would be equal if each $G_\C$-orbit met $\mu^{-1}(0)$
in a single $G$-orbit. At least, we can say that
each $G$-orbit $O$ in $\mu^{-1}(0)$ is contained in some $G_\C$-orbit $O_\C$,
and then we can ask: does $O_\C$ meet $\mu^{-1}(0)$ anywhere \ti{else}?
In many cases there is a convexity argument which shows 
that this can't happen: namely one finds a $f$ on $G_\C / G$ 
such that the orbits in $\mu^{-1}(0)$ are
exactly the minima of this function, and moreover shows that $f$ 
is convex along geodesics in $G_\C / G$, so its minimum is unique
if it exists. So then at least we have 
$X \kq G \subset X / G_\C$. The remaining question is whether there might
be some orbits which don't meet $\mu^{-1}(0)$ at all. Generally there are
(like the orbit of $0 \in \C^n$ above);
these are the \ti{unstable} orbits in $X / G_\C$, which need to be 
thrown out; after restricting to their complement $X^s$, we finally get
the desired
\begin{equation}
  X \kq G \simeq X^s / G_\C.
\end{equation}


\subsection{Holomorphic symplectic manifolds}

\begin{defn}[Holomorphic symplectic form] If $(X,I)$ is a complex manifold, 
$\Omega \in \Omega^{2,0}(X)$ is a \ti{holomorphic
symplectic form} if $\de \Omega = 0$
and $\Omega$ is nondegenerate
in the holomorphic sense, i.e. it induces
an isomorphism $T^{1,0}X \to (T^{1,0} X)^*$.
In this case we call $(X,I,\Omega)$ a \ti{holomorphic symplectic
manifold}.
\end{defn}
Note that this definitely does \ti{not} mean that $\Omega$ is nondegenerate on the whole $T_\C X$. Indeed, since $\Omega$ is 
of type $(2,0)$ its contraction with any $v \in T^{0,1} X$ vanishes.

Morally you should think of a holomorphic symplectic form $\Omega$
as something like the analytic continuation of a real 
symplectic form from some real subspace of $X$.

\begin{prop}[Holomorphic symplectic manifolds have dimension $4n$] 
\label{prop:hol-symp-dimension-4n} If $(X,I,\Omega)$ is a holomorphic symplectic manifold,
then $\dim_\R X$ is a multiple of $4$.
\end{prop} 
\begin{pf} The holomorphic symplectic form $\Omega$ restricts to a nondegenerate form on each fiber of the complex vector 
bundle $T^{1,0} X$.
Using \autoref{prop:standard-nondegenerate-2-form}, it follows
that $T^{1,0} X$ has even complex dimension.
\end{pf}

\begin{prop}[Holomorphic symplectic form determines complex structure] \label{prop:hol-symp-to-complex}
Suppose $X$ is a manifold smooth with $\dim_\R X = 2n$, 
with $\Omega \in \Omega^2_\C(X)$, such that $\de \Omega = 0$ and
\begin{equation}
 T_\C X = \ker \Omega \oplus \ker \overline\Omega. 
\end{equation}
Then there is a 
unique complex structure $I$ on $X$, for which $\Omega$
is a holomorphic symplectic form.
\end{prop}
\begin{pf} We define a complex-linear operator 
$I_\C$ on $T_\C X$ to act by $-\I$ on
$\ker \Omega$, and by $+\I$ on $\ker \overline\Omega$.
This $I_\C$ obeys $I_\C v = \overline{I_\C \bar{v}}$, so it is the 
complexification of a real-linear operator $I$ on $TX$,
which gives an almost complex structure.
The integrability of $I$ is equivalent to requiring
that $T^{0,1} X = \ker \Omega$ is an integrable distribution,
i.e. that if $v,w$ are sections of $\ker \Omega$ then $[v,w]$
is also a section of $\ker \Omega$.
This follows from $\de \Omega = 0$ and the covariant formula
for $\de$: for any third vector field $y$ we have
\begin{equation}
  \de \Omega(v,w,y) = v \Omega(w,y) + w \Omega(y,v) + y \Omega(v,w)
  - \Omega([v,w],y) - \Omega([y,v],w) - \Omega([w,y],v)
\end{equation}
and now all terms vanish except the one we want:
\begin{equation}
  0 = -\Omega([v,w],y)
\end{equation}
so $[v,w]$ is a section of $\ker \Omega$ as desired.
\end{pf}



\section{Hyperk\"ahler manifolds}

Useful (and inspiring) references are \cite{MR88f:53087,Hitchin-hk,MR1798605,boalch-notes}.

\subsection{Basic definitions}

\begin{defn}[\Hk manifold] A \ti{\hk manifold} is 
a tuple $(X,g,I_1,I_2,I_3)$, where $(X,g)$ is a Riemannian 
manifold equipped with three complex 
structures $I_i$ obeying $I_1 I_2 = I_3$,
such that $(X,g,I_i)$ is \kahler for $i=1,2,3$.
\end{defn}

It is crucial that we require the \ti{single} metric
$g$ to be \kahler for \ti{all} of the $I_i$:
this is a very strong condition!
We denote the three corresponding
\kahler forms $\omega_i$.
Sometimes it is convenient to use instead the
notation $(I_1,I_2,I_3) = (I,J,K)$
and $(\omega_1,\omega_2,\omega_3) = (\omega_I,\omega_J,\omega_K)$.

\begin{exercise} Show that the relations $I_1 I_2 = I_3$ and $I_1^2 = I_2^2 = I_3^2 = -1$ are equivalent to the full set of quaternion relations
\begin{gather}
  I_1 I_2 = I_3, \quad I_2 I_1 = - I_3, \\
  I_2 I_3 = I_1, \quad I_3 I_2 = - I_1, \\
  I_3 I_1 = I_2, \quad I_1 I_3 = - I_2, \\
  I_1^2 = I_2^2 = I_3^2 = -1.
\end{gather}
\end{exercise}

\begin{prop}[\Hk manifolds are holomorphic symplectic] \label{prop:hyperkahler-is-hol-symplectic}
If $X$ is \hk then $\Omega_1 = \omega_2 + \I \omega_3$ is a \ti{holomorphic symplectic form} with respect to structure $I_1$ (and similarly with the indices 
$1,2,3$ cyclically permuted.)
\end{prop}
\begin{pf} 
\begin{align}
    \Omega_1(v,w) &= \omega_2(v,w) + \I \omega_3(v,w) \\
    &= g(I_2 v,w) + \I g(I_3 v,w)
\end{align}
Thus
\begin{align}
    \Omega_1(I_1 v,w) &= g(I_2 I_1 v, w) + \I g(I_3 I_1 v,w) \\
    &= -g(I_3 v, w) + \I g(I_2 v, w) \\
    &= \I \Omega_1(v,w)
\end{align}
and similarly
\begin{equation}
 \Omega_1(v,I_1 w) = \I \Omega_1(v,w). 
\end{equation}
It follows that $\Omega_1$ is of type $(2,0)$ for $I_1$,
$\Omega_1 \in \Omega^{2,0}_{I_1}(X)$.
The nondegeneracy follows from the nondegeneracy for the $\omega_i$: namely, for any $v \in T^{1,0}_{I_1} X$,
\begin{equation}
  \Omega_1(v,\cdot) = 0 \implies \Omega_1(v+\bar{v}, \cdot) = 0 \implies \omega_2(v + \bar{v}, \cdot) = 0 \implies v + \bar{v} = 0 \implies v = 0.
\end{equation}
The remaining claims are obtained by cyclic permutations.
\end{pf}

\begin{cor}[\Hk manifolds have dimension $4n$] If $X$ is \hk then $\dim_\R X$ is a multiple of $4$.
\end{cor}
\begin{pf} This follows directly from \autoref{prop:hol-symp-dimension-4n}.
\end{pf}

\begin{prop}[Explicit formula for the complex structures on a 
\hk manifold in terms of $\omega_i$]
If $X$ is \hk then
\begin{equation}
I_1 = \omega_3^{-1} \omega_2
\end{equation}
and cyclic permutations.
(What this formula really means: view $\omega_2$ as a map $TX \to T^* X$
namely $v \mapsto \omega_2(v,\cdot)$,
and $\omega_3^{-1}$ as a map $T^* X \to TX$
namely $\omega_3(v,\cdot) \mapsto v$; then the composition
$\omega_3^{-1} \omega_2: TX \to TX$ is $I_1$.)
\end{prop}
\begin{pf}
What we have to check is that $\omega_3(I_1 v,\cdot) = \omega_2(v,\cdot)$.
But
\begin{equation}
 \omega_3(I_1 v,\cdot) = g(I_3 I_1 v,\cdot) = g(I_2 v, \cdot) = \omega_2(v,\cdot)
\end{equation}
as desired.
\end{pf}

\begin{cor}[The $\omega_i$ determine the \hk metric]
If $X$ is \hk then
\begin{equation}
g = -\omega_1 \omega_3^{-1} \omega_2  
\end{equation}
and cyclic permutations.
(Here similarly we view $g$ as a map $TX \to T^*X$,
namely $v \mapsto g(v,\cdot)$.)
\end{cor}

\begin{prop}[Condition for forms $\omega_i$ to give a \hk metric] \label{prop:omega-hk-condition}
Suppose $X$ is a smooth manifold with symplectic forms 
$\omega_1, \omega_2, \omega_3$, obeying the condition that
\begin{equation}
-\omega_1 \omega_3^{-1} \omega_2 = -\omega_2 \omega_1^{-1} \omega_3 = -\omega_3 \omega_2^{-1} \omega_1,
\end{equation}
and that this quantity, $g$, 
is \ti{positive definite} as a symmetric bilinear form.
Then $g$ is a \hk metric on $X$,
with $\omega_i$ the associated \kahler forms.
\end{prop}
\begin{pf} \fixme{...}
\end{pf}

\begin{exercise}
Suppose $(X,g,I_1,I_2,I_3)$ is a \hk manifold. Fix any $\vec s = (s_1,s_2,s_3) \in S^2 \subset \R^3$, and set
\begin{equation}
  I_{\vec s} = \sum_{i=1}^3 s_i I_i, \qquad \omega_{\vec s} = \sum_{i=1}^3 s_i \omega_i.
\end{equation}
Show that $(X,I_{\vec s},g)$ is a \kahler manifold,
with \kahler form $\omega_{\vec s}$.
\end{exercise}
In other words, a \hk metric is \kahler for a whole 
$S^2$ of complex structures, not only three of them.
We can think of this $S^2$ as the
set of norm-$1$ imaginary quaternions.
Specifying $I_1$, $I_2$, $I_3$ is equivalent to 
specifying the whole collection of $I_{\vec s}$.

Note that the antipodal map acts in a simple way:
$I_{-\vec s} = - I_{\vec s}$, the opposite
complex structure of $I_{\vec s}$ --- i.e. 
the antipodal map exchanges holomorphic and antiholomorphic.

\begin{exercise}
Given a Riemannian manifold $(X,g)$ and 
a \hk structure thereon, specified by complex structures
$I_{\vec s}$, show that we get another
\hk structure by choosing an element $T \in SO(3)$
and defining 
\begin{equation}
I'_{\vec s} = I_{T \vec s}.
\end{equation}
Thus $SO(3)$ naturally acts on the set of
\hk manifolds.
\end{exercise}


\subsection{First examples}

\begin{example}[Flat quaternionic space] \label{exa:R4}
Being a real vector space, $\bbH$ is
a manifold of real dimension $4$.
If we identify $T_p \bbH \simeq \bbH$ in the obvious way,
the quaternion norm $\norm{q}^2 = q \bar{q}$
induces a metric $g$ on $\bbH$.
The operations of left-multiplication by $\I$, $\J$ and $\K$
give complex structures $I_1$, $I_2$, $I_3$ on $\bbH$,
obeying the quaternion algebra.
Evidently these are all covariantly constant, so
$g$ is \kahler for all three of these complex
structures, and thus $\bbH$ is \hk.

To introduce coordinates we
identify $\bbH$ with $\R^4$
via the map
\begin{equation}
  x_0 + x_1 \I + x_2 \J + x_3 \K \mapsto (x_0,x_1,x_2,x_3).
\end{equation}

Then the symplectic forms are
\begin{align}
  \omega_1 &= \de x_0 \wedge \de x_1 + \de x_2 \wedge \de x_3, \\
  \omega_2 &= \de x_0 \wedge \de x_2 + \de x_3 \wedge \de x_1, \\
  \omega_3 &= \de x_0 \wedge \de x_3 + \de x_1 \wedge \de x_2,
\end{align}
or more uniformly
\begin{equation} \label{eq:symplectic-forms-R4}
  \omega_i = \de x_0 \wedge \de x_i + \star \de x_i
\end{equation}
where $\star$ denotes the Hodge star of $\R^3$ (with its 
standard orientation), not $\R^4$.
The holomorphic symplectic form is
\begin{equation}
  \Omega_1 = \omega_2 + \I \omega_3 = \de w_1 \wedge \de z_1, \qquad w_1 = x_0 + \I x_1, \qquad z_1 = x_2 + \I x_3.
\end{equation}
$w_1$ and $z_1$ are complex coordinates with respect to $I_1$.
Thus, in structure $I_1$, $\bbH$ is biholomorphic to $\C^2$.
Similarly we can write
\begin{equation} \label{eq:Omega-i-R4}
  \Omega_i = \omega_{i+1} + \I \omega_{i+2} = \de w_i \wedge \de z_i, \qquad w_i = x_0 + \I x_i, \qquad z_i = x_{i+1} + \I x_{i+2}
\end{equation}
(where we adopt the convention $x_{i+3} = x_i$.)

All this generalizes in a straightforward way to $\bbH^n$ 
or better, an affine space modeled on $\bbH^n$, or even 
better, an affine space modeled on a quaternionic vector space.
\end{example}

\begin{exercise} \label{exc:flat-space-computing}
Verify the explicit formulas \eqref{eq:symplectic-forms-R4} 
for the symplectic forms $\omega_i$ on $\bbH$, and write a 
formula for $\omega_{\vec s}$.
\end{exercise}

$\bbH$ has a lot of symmetry. For example, $\bbH$ acts 
on itself by translations preserving the \hk structure.
Also the group $O(4)$ acts on $\bbH$ by isometries, but 
these do \ti{not} generally preserve the \hk structure.
However, we do have the following. The 
unit sphere in ${\mathbb H}$ is a Lie group,
which happens to be isomorphic to $SU(2)$.\footnote{The isomorphism
can be given explicitly by the formula
\begin{equation}
  x_0 + x_1 \I + x_2 \J + x_3 \K \mapsto \begin{pmatrix} x_0+x_1\I & x_2+x_3\I \\ -x_2+x_3\I & x_0-x_1\I \end{pmatrix}
\end{equation}
but we will not need to use this anywhere.}
Thus we have an action of $SU(2) \times SU(2)$ 
on ${\mathbb H}$ by
\begin{equation}
  (q, q') \cdot x = q x q'^{-1}.
\end{equation}
This gives a map $SU(2) \times SU(2) \to SO(4)$.
Said otherwise, $O(4)$ has two canonical $SU(2)$ subgroups,
which we call $SU(2)_L$ and $SU(2)_R$ (for ``left'' and ``right.'')
(Incidentally, this map has kernel $\{(1,1),(-1,-1)\} \simeq \Z_2$, 
thus gives an isomorphism $SO(4) \simeq (SU(2) \times SU(2)) / \Z_2$.)

\begin{exercise} \label{exc:su2r-action}
Show that $SU(2)_R$ acts on $\bbH$ by \ti{triholomorphic} 
isometries, i.e. isometries which are holomorphic for
all of $I_1$, $I_2$, and $I_3$.
\end{exercise}

\begin{exercise} \label{exc:su2l-action}
Show that the action of $T \in SU(2)_L$ on $\bbH$ has
\begin{equation}
  T^* I_{\vec s} = I_{T \vec s}
\end{equation}
On the right side, by $T \vec s$ we mean the \ti{conjugation}
action of the unit quaternion $T$ on the sphere of norm-$1$
imaginary quaternions, $\vec s \mapsto T^{-1} {\vec s} T$ 
(which gives the standard double-covering $SU(2) \to SO(3)$.)
\end{exercise}

\begin{exercise}
Show that in any complex structure
$I_{\vec s}$, $\bbH$ is biholomorphic
to $\C^2$.
\end{exercise}

\begin{example}[Quotients of $\bbH$] \label{exa:H-quotients}
It follows from \autoref{exc:su2r-action} that, if we choose a subgroup
$\Gamma \subset SU(2)_R$, the quotient
$\bbH / \Gamma$ is a \hk orbifold: in particular, it
carries a natural \hk structure 
on the locus where it is a manifold. For example,
if $\Gamma$ is a discrete subgroup, it acts
freely away from the origin, so
\begin{equation}
X_\Gamma^\circ = (\bbH \setminus \{0\}) / \Gamma  
\end{equation}
is a \hk manifold.
However, this \hk manifold is \ti{incomplete},
since the origin is at finite distance.
\end{example}

\insfig{higgs-bundles-4}{0.65}

\begin{example}[$\R^3 \times S^1$] \label{exa:R3S1}
Since translations preserve the \hk structure, we can divide $\bbH$
out by $\Z$ acting by translations 
\begin{equation}
 x_0 \to x_0 + 2 \pi n 
\end{equation}
to get another \hk manifold,
\begin{equation}
 X = \bbH / \Z \simeq \R^3 \times S^1.
\end{equation}
In structure $I_1$ we have
\begin{equation}
  \Omega_1 = -\I \frac{\de \cX_1}{\cX_1} \wedge \de z_1, \qquad \cX_1 = \exp(\I(x_0 + \I x_1)), \qquad z_1 = x_2 + \I x_3 
\end{equation}
The functions $(z_1,\cX_1)$ make $(X,I_1)$ 
biholomorphic to $\C \times \C^\times$.
\end{example}

\begin{exercise}
Show that $SO(3)$ acts by isometries on $X = \bbH / \Z$,
with
\begin{equation}
  T^* I_{\vec s} = I_{T \vec s}.
\end{equation}
\end{exercise}

\begin{exercise}
Show that for any $\vec s$, $X = \bbH / \Z$ with complex structure
$I_{\vec s}$ is biholomorphic to $\C \times \C^\times$.
\end{exercise}

Crudely speaking, the different complex structures 
$I_{\vec s}$ correspond to different ways of picking which 
direction in $\R^3$ will get 
paired up with the circle direction to make a $\C^\times$.

\begin{example}[Incomplete Gibbons-Hawking spaces] \label{exa:incomplete-gibbons-hawking}
Now we generalize from $\R^3 \times S^1$ to a more general
\hk space with $U(1)$ action. We begin with the case of 
a \ti{free} action, i.e. a principal
$U(1)$ bundle.

Fix some open set $U \subset \R^3$ and
let $V: U \to \R_{>0}$ be a positive harmonic function.\footnote{Our
conventions for the Laplace operator on $\Omega^0(\R^3)$ are:
$\Delta f = \de \star \de f = \sum_i \partial_i^2 f \, \de \vol$.}
Then $\Delta V = \de \star \de V = 0$, so if we write
\begin{equation}
  F = -2 \pi \star \de V
\end{equation}
then we have $\de F = 0$. 

Fix a principal $U(1)$ bundle $X$ over $U$, carrying a connection
$\Theta$ whose curvature is $F$.
(Such an $X$ exists if and only if $[F/2\pi]$ lies in 
the image of $H^2(U,\Z) \to H^2_{dR}(U,\R)$.) 
Globally this means a 1-form $\Theta$ on $X$
such that $\de \Theta = F$ (more precisely on the RHS we have
the pullback of $F$ to $X$) and $\Theta \cdot \partial_\chi = 1$,
where $\partial_\chi$ denotes the vector field on $X$ 
generating the $U(1)$ action. If we choose a local
trivialization of the $U(1)$-bundle $X$ over a patch
$U_\alpha \subset U$, with local 
fiber coordinate $\chi_{\alpha} \in \R / 2 \pi \Z$, then $\Theta$ 
is locally of the form
\begin{equation}
 \Theta = A_\alpha + \de \chi_{\alpha},
\end{equation}
with $A_\alpha \in \Omega^1(U_\alpha)$, $\de A_\alpha = F$.
\newcommand{\tTheta}{\tilde\Theta}
For convenience write $\tTheta = \Theta / 2\pi$.

We introduce three symplectic forms on $X$,
generalizing \eqref{eq:symplectic-forms-R4}:
\begin{equation}
  \omega_i = \tTheta \wedge \de x_i + V \star \de x_i.
\end{equation}
To check that these are indeed closed,
\begin{equation}
  \de \omega_i = - \star \de V \wedge \de x_i + \de V \wedge \star \de x_i = 0
\end{equation}
(the last equality because all of these forms are pulled back
from $\R^3$, and on $\R^3$ we always have $\star \alpha \wedge \beta = \alpha \wedge \star \beta$ for 1-forms $\alpha, \beta$.)

Then define
\begin{align}
  \Omega_1 &= \omega_2 + \I \omega_3 \\
  &= \tTheta \wedge \de z_1 +  V \star \de(x_2 + \I x_3)\\
  &= \tTheta \wedge \de z_1 +  V (\de x_3 \wedge \de x_1 + \I \de x_1 \wedge \de x_2)\\
  &= \tTheta \wedge \de z_1 + \I V \de x_1 \wedge \de z_1 \\
  &= V \alpha_1 \wedge \de z_1
\end{align}
where we introduced
\begin{equation} \label{eq:hol-forms-GH}
  z_1 = x_2 + \I x_3, \qquad 
  \alpha_1 = V^{-1} \tTheta + \I \de x_1.
\end{equation}
Then $\ker \Omega_1$ is spanned by
\begin{equation} \label{eq:gibbons-hawking-01-vectors}
 \hat\partial_2 + \I \hat\partial_3, \qquad 2 \pi V \partial_\chi + \I \hat\partial_1,  
\end{equation}
 where $\partial_\chi$ 
is the globally defined generator of the $U(1)$ action 
(shifting $\chi$),  and $\hat \partial_i$ means
the parallel lift of $\partial_i$ from $\R^3$ to $X$, i.e. the lift
obeying $\Theta \cdot \hat\partial_i = 0$. Thus
by \autoref{prop:hol-symp-to-complex}, $\Omega_1$ 
determines a complex structure $I_1$ on $X$, which acts
by $+\I$ on $\de z_1$ and $\alpha_1$.
In this structure, $\de z_1$ is of type $(1,0)$, so
$z_1$ is a holomorphic map,
\begin{equation}
  z_1: X \to \C.
\end{equation}

Morally this map makes $X$ into something like 
a $\C^\times$-bundle over a patch of $\C$ (generalizing
the $\C\times\C^\times$ which we got in \autoref{exa:R3S1}).
It is not quite a $\C^\times$-bundle in general
(since $U$ was an arbitrary open subset of $\R^3$), 
but it does at least have 
a holomorphic vector field tangent to the fibers,
$\partial_\chi - \I V^{-1} \hat \partial_1$.

Similarly we have
\begin{equation} \label{eq:Omega-i-GH}
  \Omega_i = V \alpha_i \wedge \de z_i
\end{equation}
where
\begin{equation} \label{eq:Omega-i-GH-2}
  z_i = x_{i+1} + \I x_{i+2}, \qquad \alpha_i = V^{-1} \tTheta + \I \de x_i
\end{equation}
and we can use this to define complex structures $I_2$, $I_3$.
Just as for $\R^3 \times S^1$ these obey the quaternion
relation $I_1 I_2 = I_3$ --- we could check this directly, 
or just note that pointwise \eqref{eq:Omega-i-GH}-\eqref{eq:Omega-i-GH-2}
are isomorphic to \eqref{eq:Omega-i-R4}
(take $\de x_i \to \sqrt{V} \de x_i$ and $\de x_0 \to \tTheta / \sqrt{V}$),
and the $\Omega_i$ determine the $I_i$ by pointwise calculations,
so they must obey the same relations they obeyed on $\R^4$.

Now we compute $g$ from $I_1$ and $\omega_1$:
\begin{equation}
  \omega_1 = V \re \alpha_1 \wedge \im \alpha_1 + V \re \de z_1 \wedge \im \de z_1
\end{equation}
which gives
\begin{align}
  g &= V ((\re \alpha_1)^2 + (\im \alpha_1)^2) + V ((\re \de z_1)^2 + (\im \de z_1)^2) \\
  &= V (V^{-2} \tTheta^2 + \de x_1^2) + V (\de x_2^2 + \de x_3^2) \\
  &= V \norm{\de x}^2 + V^{-1} \tTheta^2
\end{align}
% Note that the explicit index $1$ has disappeared from this formula;
% if we had computed $g$ from $I_2$ and $\omega_2$, or
% from $I_3$ and $\omega_3$, we would get the same result.
Thus the metric on $X$ given by
\begin{equation} \label{eq:gibbons-hawking-metric}
  g = V \norm{\de x}^2 + V^{-1} \tTheta^2
\end{equation}
is \hk, with \kahler forms $\omega_i$.

The principal $U(1)$ action on $X$ is by isometries preserving
the \hk structure (this is clear since nothing in $\omega_i$
depends on the fiber coordinates).
\end{example}

\begin{exercise} \label{exc:preimages-of-lines} 
Let $L$ be a line in $U$, oriented 
in the direction $\vec s = (1,0,0)$. 
Show that $\pi^{-1}(L)$ is a complex submanifold of $X$
in the complex structure $I_1$. (Hint: it's sufficient
to show that the holomorphic symplectic form $\Omega_1$ vanishes
along this submanifold --- why?) If $U = \R^3$ and $V=1$,
describe this complex submanifold explicitly in complex coordinates. 
\end{exercise}

\begin{example}[$\R^4 \setminus \{ 0 \}$ as an incomplete Gibbons-Hawking space] \label{exa:gibbons-hawking-R4}
Consider \autoref{exa:incomplete-gibbons-hawking} with
$U = \R^3 \setminus \{0\}$. In spherical coordinates
$(r,\theta,\varphi)$ take\footnote{Our conventions
for spherical coordinates are:
\begin{align}
x_1 &= r \cos \theta, \\
x_2 &= r \sin \theta \cos \phi, \\
x_3 &= r \sin \theta \sin \phi.
\end{align}
}
\begin{equation}
 V(x) = \frac{1}{4\pi r}.
\end{equation}
Then we have 
\begin{equation}
 F = \half \sin \theta \, \de \theta \wedge \de \varphi 
\end{equation}
which has $\int_{S^2} \frac{F}{2\pi} = 1$ and thus obeys our
quantization condition, so that there exists a circle bundle
$X \to U$ with this curvature. The total space of such a
circle bundle over $S^2$ is the Hopf fibration $S^3 \to S^2$.

$X$ thus doesn't extend as a $U(1)$ bundle
over the point $x = 0$.
Nevertheless it \ti{does} extend as a \hk manifold.
Indeed, near $0$ the circle fibers of $X$ are shrinking to zero
length, and it is possible to add
a single point over $0$, in such a way 
that the total space is a \hk manifold with non-free 
$U(1)$ action, and the quotient is $\R^3$.
To see this explicitly, let's fix a trivialization away 
from $\theta = \pi$, with respect to 
which $\Theta = A + \de \chi$,
\begin{equation}
  A = \half(1 - \cos \theta) \, \de \varphi.
\end{equation}

Now we have 
\begin{align}
  g &= \frac{1}{4 \pi r} (\de r^2 + r^2 \de \theta^2 + r^2 \sin^2 \theta \de \varphi^2) + \frac{r}{\pi} \left(\half (1-\cos \theta) \de \varphi + \de \chi\right)^2 \\
%  &= \frac{1}{4 \pi r} \de r^2 + \frac{r}{4 \pi} (\de \theta^2 + \sin^2 \theta \de \varphi^2 + ((1 - \cos \theta) \de \varphi + 2 \de \chi)^2) \\
  &= \frac{1}{4 \pi r} \de r^2 + \frac{r}{\pi} \left(\qtr \de \theta^2 + \half(1-\cos\theta) \de \varphi^2 + \de \chi^2 + (1-\cos \theta) \de \varphi \de \chi\right).
\end{align}
Now the surprise is that the second part is just the round 
metric on $S^3$ with radius $\rho = \sqrt{r/\pi}$, 
and the whole $g$ is isometric to 
the Euclidean metric on $\R^4 \setminus \{0\}$.
To see this explicitly take
\begin{align}
  y_0 &= \sqrt{r/\pi} \sin(\theta/2) \cos\left(\varphi + \chi\right), \\
  y_1 &= \sqrt{r/\pi} \sin(\theta/2) \sin\left(\varphi + \chi\right), \\
  y_2 &= -\sqrt{r/\pi} \cos(\theta/2) \sin\left(\chi\right), \\
  y_3 &= -\sqrt{r/\pi} \cos(\theta/2) \cos\left(\chi\right),
\end{align}
and then compute directly that
\begin{equation}
  g = \sum_{i=0}^3 \de y_i^2.
\end{equation}
\end{example}

\begin{exercise} \label{exc:gibbons-hawking-R4}
Show that the \hk structure on $X$ in
\autoref{exa:gibbons-hawking-R4} matches the standard one
in $\R^4 \setminus \{0\}$, given in \autoref{exa:R4}.
This means that $X$ can be extended to a 
complete \hk manifold $\bar X$, on which $U(1)$ acts 
by isometries with a single fixed point,
and $\bar X / U(1) = \R^3$. In other words, starting 
from $X$ we can ``fill in the missing fiber over $0$''
in a smooth \hk way, and the resulting \hk manifold
is isomorphic to $\R^4$ with its standard \hk structure.
\end{exercise}

In particular, complex structure $I_1$ on $X$ has
holomorphic coordinates $w_1 = y_0 + \I y_1$ and $z_1 = y_2 + \I y_3$.
Thus the loci $z_1 = 0$ and $w_1 = 0$ are complex submanifolds of
$I_1$, intersecting at a single point.
These correspond to $\theta = 0$ and $\theta = \pi$, 
i.e. the preimages in $X$ of the two half-lines $x_2 = x_3 = 0$, $\pm x_1 \ge 0$.
(From Exercise \ref{exc:preimages-of-lines} we already knew that
the preimage of the half-line is a complex manifold, \ti{except} at the 
point over $x = 0$. The discussion above shows that it actually extends
to an honest complex manifold even over $x=0$.)

\insfig{higgs-bundles-6}{0.9}

There is a more conceptual way of arriving at \autoref{exa:gibbons-hawking-R4}:

\begin{exercise} \label{exc:R4-moment-maps}
Consider again the standard \hk structure on $\R^4$ 
(\autoref{exa:R4}), which is acted on by $SU(2)_R$.
Show that there is a subgroup $U(1) \subset SU(2)_R$ which acts
by $(w_1,z_1) \to (e^{-\I \alpha} w_1, e^{\I\alpha} z_1)$.
Thus this action preserves the \hk structure.
Moreover show that this action admits moment maps 
$\mu_i: \R^4 \to \fu(1)^*$ with 
respect to all of the $\omega_i$.
If we identify $\fu(1) \simeq \R$, we obtain a map $\vec\mu: \R^4 \to \R^3$ given by
$(\mu_1, \mu_2, \mu_3)$. Show that there is exactly one $x \in \R^3$
such that $\vec\mu^{-1}(x)$ is a single point; 
by shifting each $\mu_i$ by a constant we can arrange
that this point is $0 \in \R^3$. Then show that
the map $\vec\mu$ realizes
$\R^4 \setminus \{0\}$ as a principal $U(1)$ bundle 
over $\R^3 \setminus \{0\}$,
and that the metric is of the form in \autoref{exa:gibbons-hawking-R4}.
(Hint: at some points it is convenient to consider the complex combination 
$\mu_2 + \I \mu_3$, which is a moment map for the holomorphic symplectic
form $\Omega_1$.)
\end{exercise}

% This was also true of $\bbH$ of course 
% (\autoref{exc:flat-space-computing}); nevertheless, Taub-NUT space
% and $\bbH$ are definitely not the same \hk manifold!
% Thus there is more information in the \hk structure than
% in the set of complex manifolds one obtains by specializing.

\begin{example}[$(\R^4 / \Z_k) \setminus \{0\}$ as an incomplete Gibbons-Hawking space]
\label{exa:gibbons-hawking-R4Zk}
We can modify \autoref{exa:gibbons-hawking-R4} by taking some
integer $k>0$ and setting
\begin{equation}
  V = \frac{k}{4 \pi r}.
\end{equation}
Then the metric \eqref{eq:gibbons-hawking-metric} (divided by $k$)
matches with that of \autoref{exa:gibbons-hawking-R4} except that
the circumference of the circle fibers is shorter by a factor of $k$.
In other words, this metric is obtained by dividing
out the metric of $\R^4 / \{ 0 \}$ by a subgroup 
$\Z_k \subset U(1)$. In turn this $U(1) \subset SU(2)_R$, so this is a special case of the quotients
described in \autoref{exa:H-quotients}. Unlike the case $k=1$, here we \ti{cannot}
fill in the missing point to make a smooth manifold (if we could, we would have a 
point whose link is the lens space $S^3 / \Z_k$.)
\end{example}

Finally we are ready to use this technology to 
produce some really interesting complete \hk spaces.
There are no 
nonconstant positive harmonic functions on the full $\R^3$.\footnote{
This is trickier than I thought, but there is a proof 
at \tt\href{http://math.stackexchange.com/questions/561818}{http://math.stackexchange.com/questions/561818}.
}
Thus \autoref{exa:incomplete-gibbons-hawking} does not give
\hk metrics fibered over the full $\R^3$.
However we can do better:

\begin{example}[Gibbons-Hawking spaces] \label{exa:gibbons-hawking}
Extending \autoref{exa:incomplete-gibbons-hawking}
and \autoref{exa:gibbons-hawking-R4},
let us fix $U \subset \R^3$, 
distinct points $x_1, \dots, x_k$ in $U$,
and a function $V$ on $U$ with\footnote{On the RHS $\delta$ means
the ``Dirac delta function'' on $\R^3$, 
which should be understood
as a distributional 3-form; thus this 
equality is understood in the sense 
of distributions; it won't be important for our purpose to 
know exactly what it means, since we will deal only with
some very concrete examples, but if you are interested,
one source is Chapter 6 of \cite{MR1817225}.}
\begin{equation}
  \Delta V = - \sum_{i=1}^n \delta(x - x_i).
\end{equation}
Then consider a $U(1)$-bundle $X$ over $U \setminus \{x_i\}$ 
with \hk structure as in \autoref{exa:incomplete-gibbons-hawking}.
Consider a small $S^2$ around $x_i$:
\begin{equation}
  \int_{S^2} \frac{F}{2\pi} = -\int_{S^2} \star \de V = -\int_{B^3} \de \star \de V = \int_{B^3} \delta(x - x_i) = 1
\end{equation}
so the $U(1)$ bundle $X$ restricted to this $S^2$ has 
degree $1$. Thus, $X$ doesn't extend as a $U(1)$ bundle
over the point $x_i$.

Nevertheless it \ti{does} extend as a \hk manifold.
Indeed, near $x_i$ we have
\begin{equation}
V = \frac{1}{4\pi\norm{x - x_i}} + \text{regular},
\end{equation}
so the circle fibers of $X$ are shrinking to zero
length just as in \autoref{exa:gibbons-hawking-R4}.
It is possible to add a single point over each $x_i$
to get a new space $\bar X$, which is a \hk manifold with non-free 
$U(1)$ action, with $\bar X / U(1) = U$.
% This follows from the computation 
% we have already done in \autoref{exa:gibbons-hawking-R4}.
Indeed, choosing the coordinate $x' = x - x_i$,
a neighborhood $W$ of $x' = 0$ in $X$ can be identified as a 
principal $U(1)$-bundle with a neighborhood of $x = 0$
in \autoref{exa:gibbons-hawking-R4}. We have
$V = V_0 + \delta V$ and $\Theta = \Theta_0 + \delta \Theta$,
where $V_0$ and $\Theta_0$ are as in \autoref{exa:gibbons-hawking-R4},
$\delta V$ is a smooth (harmonic) function on $W$, 
and $\delta \Theta$ a smooth 1-form on $W$.
We then make the same change of coordinates 
to $(y_0,y_1,y_2,y_3)$ we made in 
\autoref{exa:gibbons-hawking-R4}, and compute that $\delta V$
and $\delta \Theta$ do not contribute to the $\omega_i$ at
$y=0$: in other words, in these coordinates we have
\begin{equation} \label{eq:gibbons-hawking-near-singularity}
  \omega_i = \de y_0 \wedge \de y_i + \de y_{i+1} \wedge \de y_{i+2} + \delta \omega_i
\end{equation}
where $\delta \omega_i$ vanishes at $y = 0$. It follows
that the \hk structure indeed extends over $y = 0$.
\end{example}

\begin{example}[Eguchi-Hanson space] \label{exa:eguchi-hanson}
This is a case of \autoref{exa:gibbons-hawking}
with two singularities. Fix distinct points
$x_1, x_2 \in \R^3$, let $U = \R^3$, and 
\begin{equation}
  V(x) = \frac{1}{4\pi \norm{x - x_1}} + \frac{1}{4\pi \norm{x - x_2}}.
\end{equation}
The resulting $\bar X$ is fibered over $\R^3$ with two degenerate fibers.
From now on we drop the bar and just call it $X$.
Let $\pi: X \to \R^3$ be the projection.
Then $\pi^{-1}(x_1 x_2)$ has the topology of $S^2$.
\end{example}

\insfig{higgs-bundles-3}{0.8}

\begin{exercise}
Show that this $S^2$ is a complex submanifold of $X$, with
respect to the two complex structures $I_{\vec s}$ where $\vec s$
is the direction from $x_1$ to $x_2$ or vice versa.
(The trickiest point is to see that it is really a manifold,
even when the two endpoints are included. Hint: by a rotation,
we can assume without loss of generality that $\vec s = (1,0,0)$.
Then away from the endpoints this $S^2$ is the locus
$z_1 = 0$, with $z_1$ given in \eqref{eq:hol-forms-GH}.)
\end{exercise}

\begin{exercise}
Show that the area of this $S^2$, in the \hk metric $g$, 
is $\norm{x_1 - x_2}$. (Hint: complex
submanifolds of \kahler manifolds are \ti{calibrated} ---
the area is just $\int \omega_{\vec s}$.)
\end{exercise}

\begin{exercise}
Show that this $S^2$ has self-intersection number $-2$.
\end{exercise}

\begin{exercise}
Show that, in either of the complex structures 
$I_{\vec s}$ of the previous
exercise, $X$ is biholomorphic to $T^* \C\PP^1$. \fixme{warning,
this one might be hard}
\end{exercise}

Eguchi-Hanson space is our first example where the $I_{\vec s}$ do not all give rise to the same complex manifold:
\begin{exercise}
Show that, in any \ti{other} complex structure $I_{\vec s'}$,
$X$ has no compact 1-complex-dimensional complex 
submanifolds. (Hint: use the fact that
there is a holomorphic function $z: X \to \C$.
The image of a compact connected 
1-complex-dimensional submanifold
would have to be a point. It might be 
convenient to assume $\vec s$ is generic and $\vec s' = (1,0,0)$,
in which case the relevant function is $z_1$ given in
\eqref{eq:hol-forms-GH}.)
\end{exercise}

Nevertheless we do have a 1-parameter group relating 
\ti{some} of the $I_{\vec s}$:
\begin{exercise}
Show that $X$ admits an action of $SO(2) \subset SO(3)$
by isometries,
such that $T^* I_{\vec s} = I_{T \vec{s}}$. \fixme{check!}
\end{exercise}

\begin{example}[Multi-Eguchi-Hanson spaces] \cite{MR520463} \label{exa:multi-eguchi-hanson} More generally, take $U = \R^3$, fix a collection
of distinct points $x_1, \dots, x_k \in \R^3$ and take
\begin{equation}
  V(x) = \sum_{i=1}^k \frac{1}{4 \pi \norm{x - x_i}}.
\end{equation}
Then a straight line segment in $\R^3$ connecting two $x_i$ (and not meeting any others)
gives an $S^2$ in $X$. This $S^2$ is a complex submanifold with respect to two of the complex structures $I_{\vec s}$, just as before.

Asymptotically, the metric on this space is approximately
what we would get by taking all $x_i = x_0$ for some fixed $x_0$. 
In that case we would have simply 
\begin{equation}
 V(x) = \frac{k}{4 \pi \norm{x - x_0}}
\end{equation}
which, as explained in \autoref{exa:gibbons-hawking-R4Zk},
gives the \hk structure of $\R^4 / \Z_k$.
Thus, when all the $x_i$ are distinct,
$g$ is a kind of \hk desingularization of $\R^4 / \Z_k$.

A nice special case occurs when all of the $x_i$ are collinear:
then we have a single complex structure in which $X$ contains $k-1$
holomorphic spheres $C_i$, with intersection numbers
$C_i \cdot C_{i+1} = 1$. In this complex structure $X$ is 
the \ti{minimal resolution} of the singularity $\C^2 / \Z_k$
(sometimes called a ``du Val singularity of type $A_{k-1}$,'' e.g.
because the intersection numbers of the $C_i$ make up the
Cartan matrix of type $A_{k-1}$.)
\end{example}

\insfig{higgs-bundles-5}{0.9}

\begin{example}[ALE spaces] \label{exa:ALE-spaces}
One can consider the minimal resolutions $X_\Gamma$
of the singularities at the origin in \autoref{exa:H-quotients}.
Then $X_\Gamma$ is an honest smooth manifold, 
carrying a natural family 
of complete \hk metrics \cite{MR90d:53055}.
These metrics asymptotically approach
the metric on $\R^4 / \Gamma$;
thus the $X_\Gamma$ are called ``ALE spaces'',
for ``asymptotically locally Euclidean.''
In the case $\Gamma = \Z_k$ these \hk metrics are
the same as those of \autoref{exa:multi-eguchi-hanson};
for other $\Gamma$ they are not Gibbons-Hawking spaces.
\end{example}

\begin{example}[Taub-NUT space]
This is a case of \autoref{exa:gibbons-hawking}
with one singularity. 
Take $U = \R^3$ and
\begin{equation}
  V(x) = 1 + \frac{1}{4\pi \norm{x-x_0}}.
\end{equation}
Now the asymptotic metric looks like that of $\R^3 \times S^1$
rather than $\R^4$.
\end{example}

\begin{exercise} Show that Taub-NUT space is
biholomorphic to $\C^2$, in any of its complex
structures. \fixme{warning, this one might be hard}
\end{exercise}

Despite this, Taub-NUT space is definitely not the same
\hk manifold as $\bbH$! So a \hk manifold contains more 
information than just a family of complex manifolds.

Similarly by taking multiple singularities in $V$ we could
obtain the ``multi-Taub-NUT'' family of metrics.


\subsection{The twistor family, first approach}

% Given a \hk manifold $X$ we have seen that we get a 
% family of complex manifolds $(X,I_{\vec s})$.
% This family can be assembled into a \ti{single}
% complex manifold, equipped with some extra structure,
% which in fact contains all the information necessary
% to reconstruct the original \hk $X$.

% Morally, the key fact is that the vector
% bundle $T^{1,0}_{I_{\vec s}} X$ actually varies
% \ti{holomorphically} as a function of $\vec s$,
% when we equip $S^2$ with its standard complex
% structure. 
We know that $\Omega_1 = \omega_2 + \I \omega_3$ is
a holomorphic symplectic form for $I_1$. We can do similarly
for an arbitrary complex structure $I_{\vec s}$, and can
even arrange that the resulting holomorphic symplectic
forms vary holomorphically:

\begin{lem}[Holomorphic symplectic forms on a \hk manifold
vary holomorphically over $S^2$] \label{lem:hol-symp-hol} 
Suppose $X$ is a \hk manifold. 
Let 
\begin{equation}
V = \Span(\omega_1, \omega_2, \omega_3) \subset \Omega^2_\C(X).
\end{equation}
For each $\vec s \in S^2$, let 
\begin{equation}
 L_{\vec s} = V \cap \Omega^{2,0}_{I_{\vec s}}(X).
\end{equation}
Then:
\begin{enumerate}
\item $\dim_\C L_{\vec s} = 1$.
\item If we equip $S^2$ with its standard 
complex structure, $L$ is a \ti{holomorphic} line subbundle of the trivial rank $3$ holomorphic bundle $S^2 \times V$, canonically isomorphic to $\cO(-2) \to \C\PP^1$.
\end{enumerate}
\end{lem}

\begin{pf}
For (1) it's enough to compute for $\vec{s} = (1,0,0)$, and there note
$\omega_2 + \I \omega_3 \in \Omega^{2,0}$, $\omega_1 \in \Omega^{1,1}$,
$\omega_2 - \I \omega_3 \in \Omega^{0,2}$. Thus $L_{\vec s}$ is 1-dimensional,
spanned by $\omega_2 + \I \omega_3$.

For (2) here is a computational proof.
Fix a complex coordinate $\zeta$
on $S^2 \setminus \{ (-1,0,0) \}$, by
\begin{equation} \label{eq:zeta-def}
 \zeta = \frac{s_3 - \I s_2}{1 + s_1}, \qquad (s_1, s_2, s_3) = \frac{(1 - \abs{\zeta}^2, -2 \im \zeta, 2 \re \zeta)}{1+\abs{\zeta}^2}.
\end{equation}
Thus we have
\begin{align}
  \zeta = 0 \leftrightarrow \vec s = (1,0,0), \quad & \zeta = \infty \leftrightarrow \vec s = (-1,0,0), \\
  \zeta = -\I \leftrightarrow \vec s = (0,1,0), \quad & \zeta = \I \leftrightarrow \vec s = (0,-1,0), \\
  \zeta = 1 \leftrightarrow \vec s = (0,0,1), \quad & \zeta = -1 \leftrightarrow \vec s = (0,0,-1).
\end{align}
Using this translation we will sometimes write 
$I_\zeta$ for $I_{\vec s}$ and $L_\zeta$ for $L_{\vec s}$.
Now consider the holomorphic family of 2-forms
\begin{equation} \label{eq:hol-symp-family}
  \Omega(\zeta) = \frac{\omega_2 + \I \omega_3}{2\zeta} - \I\omega_1 + \frac{\omega_2 - \I \omega_3}{2} \zeta.
\end{equation}
We want to check that $\Omega(\zeta) \in L_\zeta$.
As a quick check note that
\begin{equation}
  \Omega(\zeta=1) = -\I \Omega_3, \quad \Omega(\zeta=-\I) = - \Omega_2, \quad \zeta \Omega(\zeta=0) = \Omega_1.
\end{equation}
For general $\zeta$, what we want to know is that
that applying $I_\zeta$ to the first slot of $\Omega(\zeta)$ gives
$\I \Omega(\zeta)$, so that $\Omega(\zeta) \in L_\zeta$.
This can be checked (a bit laboriously) 
\mmaref{verify-holsymp}
using \eqref{eq:zeta-def}, $I_i \omega_i = g$,
$I_i \omega_{i+1} = -\omega_{i+2}$, $I_i \omega_{i+2} = \omega_{i+1}$.

Now, $\Omega(\zeta)$ blows up as $\zeta \to 0$ or 
$\zeta \to \infty.$
Still, for any $\zeta \in \C$, $\zeta \Omega(\zeta)$ is
a nonvanishing element of $L_\zeta$;
similarly, for any $\zeta \in \C^\times \cup \{\infty\}$,
$\Omega(\zeta) / \zeta$ is a nonvanishing element of $L_\zeta$.
Thus we have two holomorphic trivializations of $L_\zeta$ over 
these two patches, differing by the transition function $\zeta^{-2}$.
This gives the desired holomorphic identification
$L_\zeta \simeq \cO(-2)$ and finishes the proof.
\end{pf}

We will use the formula \eqref{eq:hol-symp-family} frequently.
Warning: different authors (and different papers by the same authors)
have different conventions for the normalization of $\Omega(\zeta)$
and the definition of $\zeta$.

\begin{lem}[$(1,0)$-covectors on a \hk manifold vary holomorphically over $S^2$] \label{lem:10-forms-hol}
Suppose $X$ is a \hk manifold. Then $(T^*)^{1,0}_{I_\zeta} X = (1 - \I \zeta I_3) (T^*)^{1,0}_{I_1} X$.
\end{lem}

\begin{pf}
If $\beta \in T^{1,0}_{I_\zeta} X$ we may compute directly that
\begin{align}
I_\zeta (1 + \zeta I_3) \beta &= \frac{((1 - \abs{\zeta}^2)I_1 - 2 \im \zeta I_2 + 2 \re \zeta I_3)(1 + \zeta I_3)\beta} {1 + \abs{\zeta}^2} \\
&= \I (1 + \zeta I_3) \beta,
\end{align}
so at least $(1 + \zeta I_3) (T^*)^{1,0}_{I_1} X \subset (T^*)^{1,0}_{I_\zeta} X$. Moreover the map $(1 + \zeta I_3)$ is injective on $(T^*)^{1,0}_{I_1} X$,
since $I_3$ and $I_1$ anticommute, so that they cannot have any
simultaneous eigenvectors. So by dimension counting we are done.
\end{pf}

\begin{cor}[$(0,1)$-vectors on a \hk manifold vary holomorphically over $S^2$] \label{cor:01-vectors-hol}
Suppose $X$ is a \hk manifold. Then $T^{0,1}_{I_\zeta} X = (1 + \I \zeta I_3) T^{0,1}_{I_1} X$.
\end{cor}
\begin{pf} Take the complex conjugate of the statement in 
\eqref{lem:10-forms-hol}, and use the metric to identify
$\bar T^* \simeq T$.
\end{pf}

\begin{exercise} Carry out the omitted computation in 
the proof of \autoref{lem:10-forms-hol}. Note a tricky point:
here we are acting on covectors rather than vectors,
so the operators $I_i$ we are using are the \ti{transposes}
of the usual ones, so $I_2 I_1 = I_3$
rather than the usual relation. (Or alternatively,
carry out the analogous computation to 
prove \autoref{cor:01-vectors-hol} directly, in which case
you would use the usual $I_1 I_2 = I_3$.)
\end{exercise}

\begin{exercise} Use \autoref{lem:10-forms-hol} to give 
an alternative proof of \autoref{lem:hol-symp-hol}. 
(You might want to look at \cite{Hitchin:1986ea}.)
\end{exercise}

% Another way of getting at this is: identify $V$ with the imaginary
% quaternions by taking $\omega_i \mapsto I_i$; 
% then $L_{\vec s}$ is the $-\I$ eigenspace 
% of the operator $I_{\vec s}$ acting on the complexification of the subspace
% $\{I_{\vec s'}: s' \perp s\}$ of $V$. (To check this, it's enough to look 
% at $\vec s = (1,0,0)$; then $L_{\vec s}$ is supposed to contain 
% $I_2 + \I I_3$.)  On the other hand the holomorphic tangent bundle $T^{1,0} S^2$
% is the $+\I$ eigenspace of the same operator.

% Yet another proof works as follows. \fixme{explain better}
% Each complex structure $I_{\vec s}$ generates a 1-parameter
% group $U(1)_{\vec s} \subset SU(2)$. All of these subgroups are 
% conjugate, and we can view
% the $S^2$ of unit imaginary quaternions as the coset space
% $SU(2)/U(1)$ parameterizing such subgroups. $U(1)_{\vec s}$
% acts with weights $2,0,-2$ on $V$, and $L_{\vec s}$ is the
% weight-$2$ piece. Now the standard complex structure on $SU(2)/U(1)$
% is such that the complex vector field corresponding to the 
% \ti{raising} generator $X^+ \in \mathfrak{su}(2)_\C$
% spans $T^{0,1}$. \fixme{...}
 

% \subsection{The twistor family, second approach}

% \fixme{this section is in progress}

% There is also a less computational approach to
% \autoref{lem:hol-symp-hol} and \autoref{lem:10-forms-hol}.
% It begins with a more incisive examination of 
% the local structure.

% \begin{defn}[Quaternionic vector space] A \ti{quaternionic
% vector space} is a real vector space $V$ with endomorphisms
% $I_1$, $I_2$, $I_3$ obeying the quaternion algebra.
% \end{defn}

% \begin{defn}[\Hk vector space] A \ti{\hk vector space} is a quaternionic vector space $V$, with a symmetric 
% bilinear form $g$ obeying for all $i$
% \begin{equation}
%   g(I_i v, I_i w) = g(v,w).
% \end{equation}
% \end{defn}

% \begin{defn}[Twistorial vector space] A \ti{twistorial vector space}
% is a holomorphic vector bundle $W \to S^2$, such that
% $W \otimes \cO(-1)$ is trivial, equipped with
% \begin{itemize}
%    \item a fiberwise nondegenerate section $\Omega$ of $\wedge^2 W^* \otimes \cO(2)$,
%    \item a ``real'' structure $\rho: \sigma^* W \simarrow \bar{W}$, where
%    $\sigma$ is the antipodal map of $\C\PP^1$.
%  \end{itemize} 
% \end{defn}

% \begin{prop}[Twistorial description of quaternionic vector spaces] 
% The category of \hk vector spaces
% is equivalent to the category of twistorial vector spaces.
% \end{prop}

% \begin{pf} Given a \hk vector space $V$, we
% construct a vector bundle $W \to S^2$ by
% choosing
% \begin{equation}
%  W_{\vec s} = \ker(I_{\vec s} + \I).
% \end{equation}
% Given a twistorial vector space $W$,
% we obtain a quaternionic vector space
% by
% \begin{equation}
%   V = H^0(W).
% \end{equation}
% \fixme{...}
% \end{pf}

% \begin{prop}[Second approach to holomorphic family of 
% holomorphic symplectic forms on \hk manifold] Suppose $X$ is a \hk manifold of 
% real dimension $4n$.
% Then there is a decomposition
% \begin{equation}
%   T_\C X \simeq H \otimes E
% \end{equation}
% with the following properties:
% \begin{enumerate}
% \item $H$ is a rank $2$ complex bundle
% $H$, with a canonical trivialization $\{h_1, h_2\}$.
% We write $\eps_H = h_1 \wedge h_2 \in \wedge^2(H)$,
% and define a pseudoreal structure $\overline{h_1} = h_2$,
% $\overline{h_2} = -h_1$; then $\overline{\eps_H} = \eps_H$.
% \item $E$ is a rank $2n$ complex bundle, with a nondegenerate
% $\eps_E \in \wedge^2(E)$, and a pseudoreal structure
% such that $\overline{\eps_E} = \eps_E$.
% \item The combination of the pseudoreal structures on $E$ and $H$
% gives the real structure on $T_\C X$.
% \item The Levi-Civita connection is induced by a connection 
% $\nabla_E$ on $E$ and the trivial connection $\nabla_H$ on $H$.
% \item $\eps_E$ and the pseudoreal structure are covariantly 
% constant for $\nabla_E$.
% \item The \hk metric $g$ is
% \begin{equation}
%   g(h_1 \otimes e_1, h_2 \otimes e_2) = \eps_H(h_1, h_2) \eps_E(e_1, e_2).
% \end{equation}
% \item Given an element $h \in H$, define
% $\Omega_h \in \Omega^2_\C(X)$ by
% \begin{equation} \label{eq:hol-symp-from-H}
%   \Omega_h(h_1 \otimes e_1, h_2 \otimes e_2) = \eps_H(h,h_1) \eps_H(h,h_2) \eps_E(e_1,e_2).
% \end{equation}
% Then $\Omega_h$ is a holomorphic symplectic form for a complex
% structure $I_h$ on $X$.
% Moreover the map $h \otimes h \mapsto \Omega_h$
% gives an isomorphism $\Sym^2(H) \simarrow V$, where $V$ is the vector
% space of \autoref{lem:hol-symp-hol}.
% \item $I_h = I_{\lambda h}$ for any $\lambda \in \C^\times$, 
% so we get complex structures labeled by points
% of $\PP(H) \simeq \C\PP^1$. Identifying $\C\PP^1 \simeq S^2$
% these are the complex structures $I_{\vec s}$.
% The projection 
% \begin{equation}
%    H \setminus \{0\} \to \PP(H)
% \end{equation} 
% realizes
% $H \setminus \{0\}$ as the complement of the zero
% section in $\cO(-1) \to \C\PP^1$. Since $\Omega_h$ depends
% quadratically on $h \in H$, it thus defines an 
% isomorphism $\cO(-2) \simeq L$ where $L$ is the line bundle of
% \autoref{lem:hol-symp-hol}.
% \item If we choose $h = h_1 + \zeta h_2$,
% then
% \begin{equation}
%   \Omega_h = \zeta \Omega(\zeta)
% \end{equation}
% where $\Omega(\zeta)$ was given in \eqref{eq:hol-symp-family}.
% % I checked this by hand for R^4
% \end{enumerate}
% \end{prop}

% \begin{pf} \fixme{...}
% \end{pf}


\subsection{The twistor space}

\begin{defn}[Twistor space] Given a \hk manifold $X$, the \ti{twistor space} of $X$ is the smooth manifold
\begin{equation}
  \cZ = X \times S^2
\end{equation}
equipped with the almost complex structure
\begin{equation}
  I(x,\vec s) = I_{\vec s}(x) \oplus I_{S^2}
\end{equation}
where $I_{S^2}$ denotes the 
standard complex structure on $S^2$.
\end{defn}

\begin{prop}[Twistor space is a complex manifold] The almost complex structure $I$ on $\cZ$ is integrable.
\end{prop}
\begin{pf}
What we will use is that $\Omega(\zeta)$ determines the complex structure fiberwise,
and $\Omega(\zeta)$ itself is holomorphic in $\zeta$.
(For a different proof, using instead \autoref{lem:10-forms-hol},
see \cite{Hitchin:1986ea}.)

Concretely: we have 
\begin{equation}
T^{0,1}_{(x,\zeta)} \cZ = T^{0,1}_{x,I_\zeta} X \oplus T^{0,1}_\zeta S^2.
\end{equation}
To see the integrability, consider a pair of vector fields in $T^{0,1} \cZ$,
of the form $v \oplus v'$
and $w \oplus w'$ with respect to this decomposition.

Part of the story is easy.
Since $v$ and $w$ are both tangent to the fiber $X_{\zeta} = \pi^{-1}(\zeta)$
the bracket $[v,w]$ is just the bracket on $X_{\zeta}$, and we already
know the integrability there, so $[v,w] \in T^{0,1} X$.
Since $v'$ and $w'$ are both pulled back from the base $S^2$,
their bracket $[v',w']$ is also pulled back from the bracket on $S^2$,
and we already know the integrability there, so again $[v',w'] \in T^{0,1} S^2$.

All that remains is to check
that $[v,w'] \subset T^{0,1} \cZ$.
Choose local coordinates $x^i$ for $X$ and write 
\begin{equation}
v = v^i(x,\zeta) \partial_i, \qquad w' = f(x,\zeta) \partial_{\bar \zeta}, \qquad
\Omega = \Omega_{ij}(\zeta) \de x^i \wedge \de x^j. 
\end{equation}
Here $v \in T^{0,1} X$ means it obeys the constraint
\begin{equation} \label{eq:v-constraint}
\Omega_{ij}(\zeta) v^i = 0.
\end{equation}
Then
\begin{equation}
 [v, f \partial_{\bar \zeta}] = (v^i \partial_i f) \partial_{\bar \zeta} - (\partial_{\bar \zeta} v^i) \partial_i.
\end{equation}
The first term is evidently in $T^{0,1} S^2$; for the second term note that
applying $\partial_{\bar \zeta}$ to \eqref{eq:v-constraint}
gives $\Omega_{ij}(\zeta) \partial_{\bar \zeta} v^i = 0$,
so the second term is in $T^{0,1} X$; thus the whole RHS is 
in $T^{0,1} \cZ$, which is what we want.
\end{pf}

\begin{prop}[Properties of twistor spaces] \label{prop:twistor-space-properties}
Suppose $X$ is a \hk manifold with twistor space $\cZ$. Then:
\begin{enumerate}
\item $\cZ$ is a complex manifold, with a 
  holomorphic projection $\pi: \cZ \to S^2$.
\item $\cZ$ carries a twisted fiberwise holomorphic symplectic form,
\begin{equation}
  \Omega \in \Omega^{2,0}_{fiber}(\cZ) \otimes \pi^* \cO(2)
\end{equation}
where $\Omega^{2,0}_{fiber}(\cZ) = \wedge^2 (T^{1,0}_{vert} \cZ)^*$.
\item $\cZ$ carries a \ti{real structure} (antiholomorphic involution)
$\rho: \cZ \to \cZ$, such that:
\begin{enumerate}
\item $\rho$ covers the antipodal involution $\sigma$ on $S^2$:
\begin{center}
\begin{tikzcd}
\cZ \arrow[r,"\rho"] \arrow[d] & \cZ \arrow[d] \\
S^2 \arrow[r,"\sigma"] & S^2
\end{tikzcd}
\end{center}
\item $\rho^* \Omega = \overline\Omega$.
(In formulating this condition we use the standard
conjugate-linear lift of $\sigma$ to act on $\cO(2)$.)
\end{enumerate}
\end{enumerate}
\end{prop}

\begin{pf}
We already proved (1). 
For (2) use the $\Omega$ of \eqref{eq:hol-symp-family}.
Finally for (3) take
\begin{equation}
  \rho(x, \vec s) = (x, - \vec s).
\end{equation}
The statement that $\rho^* \Omega = \bar\Omega$ then 
amounts to the fact that if we substitute $- 1 / \bar\zeta$
in \eqref{eq:hol-symp-family} we get $-\bar\Omega$.
\end{pf}

The fiber $\pi^{-1}(\vec s)$ is isomorphic to
$(X,I_{\vec s})$ as a complex manifold.

\begin{prop}[Real sections of twistor spaces]
Suppose $X$ is a \hk manifold with twistor space $\cZ$.
Then
$\cZ$, as a bundle over $S^2$, 
has holomorphic \ti{sections} $s_x$ corresponding
to the points $x \in X$.
These sections are \ti{real}, i.e. $s_x(-\vec s) = \rho(s_x(s))$.
The normal bundle to $s_x(S^2) \subset \cZ$ is isomorphic
to $\cO(1)^{\oplus 2n}$.
\end{prop}

\begin{pf}
Set
\begin{equation}
  s_x(\zeta) = (x,\zeta).
\end{equation}
Evidently this is a holomorphic and real section.
The desired statement about the normal bundle follows from
\autoref{lem:10-forms-hol}: indeed choosing a basis
$\{\alpha_1, \dots, \alpha_{2n}\}$ 
for the $2n$-dimensional vector space
$(T^{1,0}_{x,I_1} X)^*$ we get two 
trivializations of the conormal bundle to $s_x(S^2)$, by the sections
$\{(1 + \zeta I_3) \alpha_i \oplus 0 \}$ 
over $\{\zeta \neq \infty\}$ and $\{(1/\zeta + I_3) \alpha_i\} \oplus 0$
over $\{\zeta \neq 0\}$. The transition function
relating these two trivializations is $1/\zeta {\mathbf 1}$,
showing the conormal bundle is $\cO(-1)^{\oplus 2n}$,
thus the normal bundle is $\cO(1)^{\oplus 2n}$ as desired.
\end{pf}

The real sections can be thought of
as horizontal for a sort of nonlinear flat connection
which gives the identification between
the fibers of $\cZ$.

\insfig{higgs-bundles-7}{0.7}

\begin{defn}[Pseudo-\hk structure] Suppose $X$ is a smooth manifold.
A \ti{pseudo-\hk structure} 
on $X$ is all the data $(X, g, I_1, I_2, I_3)$
of a \hk structure except that we 
do not impose the condition that $g$ be positive definite.
\end{defn}

\begin{thm}[(Re)construction of \hk manifolds from twistor spaces]
\label{thm:hk-twistor-construction} \cite{Hitchin:1986ea}
Suppose given a manifold $\cZ$ carrying all the structures
of \autoref{prop:twistor-space-properties}. Then let $X$
be the space of all real holomorphic sections of $\cZ$
having normal bundle isomorphic to $\cO(1)^{\oplus 2n}$.
$X$ carries a canonical structure of smooth manifold and a 
canonical pseudo-\hk structure. If $\cZ$ is the twistor space of a
pseudo-\hk manifold $X'$, then $X' \subset X$, and the 
pseudo-\hk structures agree.
\end{thm}

\begin{pf} We need some results from deformation theory of 
complex manifolds. A useful reference for this stuff is
\cite{MR2093043}. Here I can only give a sketch of how it works.

The deformations of a compact complex submanifold $Y \subset \cZ$
are ``controlled by'' the sheaf cohomology of the 
holomorphic normal bundle $N = T\cZ / TY$.
The simplest situation is the situation where $H^1(Y,N) = 0$.
In this case the set parameterizing the deformations is 
actually a complex manifold, and its tangent space at a given 
$Y$ is $H^0(Y,N)$. 

We are going to apply this to the situation
where $Y$ is the image of one of the sections of $\cZ$.
Then $Y \simeq \C\PP^1$ and $N \simeq \cO(1)^{\oplus 2n}$.
The first bit of good 
news is that in this situation we indeed have $H^1(Y,N) = 0$,
because $H^1(\C\PP^1, \cO(1)) = 0$.
Moreover, since $N \otimes \cO(-1)$ is trivial
we have
\begin{equation}
  H^0(Y,N) \simeq H^0(N \otimes \cO(-1)) \otimes H^0(\cO(1)).
\end{equation}
Finally, on $H^0(N \otimes \cO(-1))$ we have a skew pairing
given by $\Omega$, while on $H^0(\cO(1))$ there is a canonical
skew pairing, concretely
\begin{equation}
  \omega(a_1 + b_1 \zeta, a_2 + b_2 \zeta) = a_1 b_2 - a_2 b_1.
\end{equation}
Combining these two gives a \ti{symmetric} pairing on 
$H^0(N) \simeq T_\C X$. Keeping track of real structures we see
that this pairing descends to a \ti{real} symmetric pairing
on $TX$. 

Next we have to check
that this pairing actually gives a \hk metric. \fixme{...}

Finally we should check that this \hk metric agrees with
the one on $X'$. \fixme{...}
\end{pf}

Two remarks about \autoref{thm:hk-twistor-construction}:
\begin{itemize}
\item I do not know any example for which $X' \neq X$, but it seems hard
in general to rule out the possibility that $\cZ$ could have some 
other real sections having nothing to do with the points of the original $X$.
\item The space $X_\C$ of \ti{all} holomorphic sections of $\cZ$ has an antiholomorphic
involution induced by $\rho$; $X$ is the fixed locus. It thus provides
a natural \ti{complexification} of $X$. For example, when $X = \bbH$,
$\cZ$ is the total space of $\cO(1) \oplus \cO(1) \to S^2$ 
(see \autoref{exa:R4-twistor-space}).
Then $X_\C$ is a complex 4-dimensional vector space,
equipped with a real structure; we recover the original $X = \bbH$
by restricting to the real points.
\end{itemize}


\subsection{First examples of twistor spaces}

\begin{example}[Twistor space of $\R^4$] \label{exa:R4-twistor-space}
For the standard \hk structure on $\bbH$ all this becomes very 
concrete. 
If we define
\begin{align}
  w(\zeta) &= w_1 - \bar{z}_1 \zeta, \\
  z(\zeta) &= z_1 + \bar{w}_1 \zeta,
\end{align}
then the holomorphic $2$-form \eqref{eq:hol-symp-family}
can be written as
\begin{equation}
  \Omega(\zeta) = \frac{1}{2\zeta} \de w(\zeta) \wedge \de z(\zeta)
\end{equation}
Indeed,
\begin{align}
  \frac{1}{2\zeta} \de w(\zeta) \wedge \de z(\zeta) &= \frac{1}{2\zeta} (\de w_1 \wedge \de z_1 + \zeta (\de w_1 \wedge \de \bar{w}_i + \de z_1 \wedge \de \bar{z}_1) - \zeta^2 \de \bar{z}_1 \wedge \de \bar{w}_1) \\
  &= \frac{\omega_2 + \I \omega_3}{2\zeta} - \I\omega_1 + \frac{\omega_2 - \I \omega_3}{2} \zeta
\end{align}
matching \eqref{eq:hol-symp-family}.

It follows (using the result of \autoref{exc:hsymp-holomorphy} below)
that $w(\zeta)$ and $z(\zeta)$ are fiberwise holomorphic.
But they are evidently also holomorphic in $\zeta$. So they are 
holomorphic functions on $\cZ$.
Thus we have two coordinate systems on $\cZ$:
$(\zeta, z(\zeta), w(\zeta))$
covering the patch $\zeta \neq \infty$ and $(1/\zeta, z(\zeta)/\zeta, w(\zeta)/\zeta)$ covering $\zeta \neq 0$. The transition map 
in the fibers is thus multiplication by $1/\zeta$.
This identifies
$\cZ$ as the total space of the rank $2$ holomorphic bundle
\begin{equation}
  \cO(1) \oplus \cO(1) \to S^2.
\end{equation}
The antiholomorphic involution $\rho$ is
\begin{equation} \label{eq:involution-R4}
  \rho(\zeta, z, w) = (-1/\bar\zeta, -\bar w / \bar\zeta, \bar z / \bar \zeta).
\end{equation}
\end{example}

\begin{exercise}
Verify the formula \eqref{eq:involution-R4} for the antiholomorphic
involution.
\end{exercise}

\begin{exercise} \label{exc:hsymp-holomorphy}
If $X$ is a complex manifold, with $\dim_\C X = 2$, with holomorphic symplectic form
$\Omega$, and $\Omega = \alpha \wedge \beta$ for $\alpha,\beta \in \Omega^1(X)$, 
show that in fact $\alpha, \beta \in \Omega^{1,0}(X)$.
\end{exercise}

\begin{example}[Twistor space of $\R^3 \times S^1$]  \label{exa:R3S1-twistor-space}
For $\R^3 \times S^1$ the picture is more interesting.
The shift by $\Z$ acts as $(w_1,z_1) \to (w_1 + 2 \pi n, z_1)$.
We can build coordinates by taking shift-invariant 
combinations of the coordinates we used in 
\autoref{exa:R4-twistor-space}:
on the patch $\zeta \neq \infty$ we take
\begin{equation}
 \eta = z - \zeta w, \qquad \cX = \exp(\I w)
\end{equation}
while on $\zeta \neq 0$ we take
\begin{equation}
 \eta' = z / \zeta^2 - w / \zeta, \qquad \cX' = \exp(\I z / \zeta)
\end{equation}
Thus the transition map is
\begin{equation}
  (\zeta', \eta', \cX') = (1 / \zeta, \eta / \zeta^2, \cX \exp(\I \eta / \zeta) )
\end{equation}
So $\eta$ is a local coordinate on the fiber of $\cO(2) \to S^2$;
let $L$ denote the line bundle over $\cO(2) \to S^2$ with 
transition function $e^{\I \eta / 2 \zeta}$; what we just showed
is that $\cZ$ is the total space of $L^2$, with the
zero section deleted (because $\cX$ never takes the value $0$.)

Note that in particular $\cZ$ is \ti{not} algebraic, because of the
appearance of the exponential function here. (Were it algebraic,
it would follow on general grounds that $L$ is pulled back from 
the base $\C\PP^1$, but that's not the case here.)
\end{example}

\begin{exercise} Write down the (fiberwise, twisted) holomorphic symplectic form 
$\Omega$ and the antiholomorphic involution in these complex 
coordinates for $\cZ$.
\end{exercise}

% \begin{example}[Twistor spaces of Gibbons-Hawking spaces]
% Now suppose $X$ is a Gibbons-Hawking space (\autoref{exa:gibbons-hawking}).
% In this case the geometry of $\cZ$ is more interesting yet.

% To get some idea of what it looks like, let us start by
% trying to describe the space of holomorphic functions on
% $X$ in a single fixed complex structure, say $I_1$.
% \fixme{...}
% \end{example}

The next example is a key one: it has many of the features 
which appear for moduli spaces of Higgs bundles (in fact 
this example literally occurs as the moduli space of 
Higgs bundles on the curve $C = T^2$ with gauge group
$G = U(1)$.)
\begin{example}[$\R^2 \times T^2$] \label{exa:R2T2}
Now fix some $\tau \in \C$, with $\im \tau > 0$, 
and let $X$ be $\R^4$ modulo shifts of $w_1$ by
the lattice 
\begin{equation}
  \Lambda_\tau = \frac{2\pi}{\sqrt{\im \tau}}(\Z \oplus \Z \tau) \subset \C.
\end{equation}
(The funny prefactor is engineered 
so that the area of $\C / \Lambda_\tau$
is $(2\pi)^2$, independent of $\tau$.)
Note that in choosing to shift $w_1$, as opposed to some other complex
coordinate, we have privileged the complex structure $I_1$. 
In structure $I_1$, moreover, we see immediately that
\begin{equation}
  X \simeq \C \times T^2_\tau,
\end{equation}
where by $T^2_\tau$ we mean the complex 
torus $\C / \Lambda_\tau$.
Similarly in structure $-I_1$ we have
\begin{equation}
  X \simeq \C \times T^2_{-\bar\tau}.
\end{equation}

Thus, as a complex manifold, $(X,I_1)$ or $(X,-I_1)$ really 
\ti{depend} on $\tau$ --- different choices (not related by $SL(2,\Z)$) 
give inequivalent complex manifolds.

What about the other structures, for $\zeta \in \C^\times$?
Let's start with the slightly easier case $\tau = \I$.
In this case the $\Z^2$ action just shifts $x_0$ and $x_1$
independently by multiples of $2\pi$.
Away from $\zeta = 0$ and $\zeta = \infty$, we can write
holomorphic coordinates as
\begin{align*}
  \cX_A &= \exp \left(\frac{z_1}{2\zeta} - \I x_1 + \frac{\bar{z}_1}{2} \zeta \right),\\
  \cX_B &= \exp \left(\frac{\I z_1}{2\zeta} + \I x_0 - \frac{\I \bar{z}_1}{2}  \zeta \right).
\end{align*}
As a check, note that at $\zeta = 1$ we have
$\cX_A = \exp(x_2 - \I x_1)$, $\cX_B = \exp(-x_3 + \I x_0)$, holomorphic
for $I_3$,
and at $\zeta = -\I$ we have
$\cX_A = \exp(- x_3 - \I x_1)$, $\cX_B = \exp(-x_2 + \I x_0)$,
holomorphic for $I_2$.
For general $\zeta \in \C^\times$ we compute directly
\begin{equation} \label{eq:hol-symp-R2T2}
  \frac{\de \cX_A \wedge \de \cX_B}{\cX_A \cX_B} = -\I \Omega(\zeta),
\end{equation}
which shows in particular (again using \autoref{exc:hsymp-holomorphy})
that $\cX_A$ and $\cX_B$ are holomorphic
on $(X,I_\zeta)$.
Thus, for all $\zeta \in \C^\times$, we get in structure $I_\zeta$
\begin{equation}
 X \simeq \C^\times \times \C^\times. 
\end{equation}

For $\tau \neq \I$ the picture is very similar, just with slightly
more complicated formulas:
\begin{equation}
\cX_{A,B} = \exp \left(\zeta^{-1} Z_{A,B} + \I \theta_{A,B} + \zeta\bar{Z}_{A,B} \right)
\end{equation}
where we introduced
\begin{align}
  \theta_A = -\frac{1}{\sqrt{\im \tau}} x_1, & \qquad
  \theta_B = \sqrt{\im \tau} x_0 - \frac{\re \tau}{\sqrt{\im \tau}} x_1, \\
  Z_A = \frac{z_1}{2 \sqrt{\im \tau}}, & \qquad  Z_B = \tau Z_A.
\end{align}
In these coordinates the $\Z^2$ action
just shifts $\theta_A$ and $\theta_B$ independently by 
multiples of $2 \pi$. The $I_1$-holomorphic combination of these 
is $\theta_B - \tau \theta_A$.

We have again
\begin{equation} \label{eq:hol-symp-R2T2-general}
  \frac{\de \cX_A \wedge \de \cX_B}{\cX_A \cX_B} = -\I \Omega(\zeta)
\end{equation}
and so again $\cX_A$ and $\cX_B$ are holomorphic, giving
$X \simeq \C^\times \times \C^\times$.
In particular, for $\zeta \in \C^\times$, the space
$(X,I_\zeta)$ as a complex manifold \ti{does not} depend on $\tau$.

\end{example}

\begin{exercise}
Check \eqref{eq:hol-symp-R2T2}, or more generally 
\eqref{eq:hol-symp-R2T2-general}. 
As we have explained,
this immediately implies that $\cX_A$ and $\cX_B$ are indeed
holomorphic functions on $\cZ$. You could also
try checking this directly from the definition of 
the complex structure on $\cZ$.
\end{exercise}

\begin{exercise}
Check that $(\cX_A, \cX_B)$ indeed give a \ti{biholomorphism}
$(X,I_\zeta) \simeq \C^\times \times \C^\times$,
and thus $(\cX_A, \cX_B, \zeta)$ give a biholomorphism between
an open subset of $\cZ$ and $\C^\times \times \C^\times \times \C^\times$.
\end{exercise}

\begin{exercise}
Write the antiholomorphic involution $\rho$ in terms
of $(\cX_A, \cX_B, \zeta)$.
\end{exercise}


% \begin{exercise} Check that the formula \eqref{eq:involution-R4} is correct.
% \end{exercise}

\begin{example}[Twistor spaces of multi-Eguchi-Hanson metrics] \label{exa:multi-eguchi-hanson-twistor}
Now we consider the twistor spaces of the metrics
of \autoref{exa:multi-eguchi-hanson}.

We have commented before that in complex structure $I_1$ there
is a holomorphic function $z_1 = x_2 + \I x_3$.
Now we want to extend this function by adding $\zeta$ dependence,
so that it becomes a holomorphic function $\eta$ on $\cZ$.
One way of thinking of it is:
for each $\zeta$ we get a complex coordinate by considering
the \ti{holomorphic moment map} of the $U(1)$ action 
with respect to $\Omega(\zeta)$. Concretely this gives
\begin{equation} \label{eq:eta-GH}
  \eta = \frac{x_2 + \I x_3}{2} - \I x_1 \zeta + \frac{x_2 - \I x_3}{2} \zeta^2. 
\end{equation}
This function blows up at $\zeta = \infty$, but near there we can 
switch to the function $\eta' = \eta / \zeta^2$. Globally the pair
$(\eta,\eta')$ gives a \ti{holomorphic map} 
from $\cZ$ to the total space of the bundle
$\cO(2) \to \C\PP^1$. or more prosaically, we have an $\cO(2)$-valued
coordinate $\eta$. (The same situation occurred in \autoref{exa:R3S1-twistor-space}.)

To complete our description of $\cZ$ we need (in each patch) one more local holomorphic coordinate. The answer turns out as follows.
If the singularities of $V$ are at points $x_1, \dots, x_n$ define
corresponding sections $\eta_1, \dots, \eta_n$ of $\cO(2)$ by
\eqref{eq:eta-GH}. Then $\cZ$ carries an $\cO(2)$-valued
coordinate $\eta$ and two $\cO(n)$-valued coordinates $u$, $v$,
obeying the equation
\begin{equation}
  uv = \prod_{i=1}^n (\eta - \eta_i).
\end{equation}
More invariantly we could say that we have a map
\begin{equation}
 \pi: \cZ \to \left\{ uv = \prod_{i=1}^n (\eta - \eta_i) \right\} \subset [(\cO(n) \oplus \cO(2) \oplus \cO(2)) \to \C\PP^1].
\end{equation}
This map is an isomorphism on all but finitely many fibers:
the exception is the fibers over $\zeta$ for which some $\eta_i(\zeta)$ become
equal. In these fibers we have some compact complex submanifolds,
the $S^2$'s discussed in \autoref{exa:multi-eguchi-hanson};
these get contracted by the map $\pi$. Thus for most values of $\zeta$,
$(\cM, I_\zeta)$ is an affine variety, while for finitely many special 
values $(\cM, I_\zeta)$ is a resolution of a singular affine variety. 
The simple example $n=2$, \autoref{exa:eguchi-hanson}, is an affine variety
$\{uv = (\eta - \eta_1)(\eta - \eta_2)\}$ in all structures $I_\zeta$ except 
for two; in those special structures we get
$T^* \C\PP^1$, realized as a resolution of the singular
variety $uv = (\eta - \eta_1)^2$.

The holomorphic symplectic form is
\begin{equation}
  \Omega = \I \frac{\de u \wedge \de v}{n \frac{\partial}{\partial \eta} \prod (\eta - \eta_i)}.
\end{equation}
Note that when $n=1$ we just have $uv = \eta$, i.e. $\eta$ can be eliminated
and we just get $u$, $v$ parameterizing $\cO(1) \oplus \cO(1)$, as we should.
\end{example}

\begin{exercise} Show that the description of the twistor space in \autoref{exa:multi-eguchi-hanson-twistor} is indeed correct. 
(Hint: construct 
the functions $u$, $v$, concretely as solutions of the Cauchy-Riemann equations.
These equations are determined by the $(0,1)$ vector fields we gave 
in \eqref{eq:gibbons-hawking-01-vectors}. The idea is to 
consider what these equations become in the special case where 
we look at a function which is locally of the form $u = f(x) e^{\I \chi}$ ---
or more invariantly, a function which obeys $\partial_\chi u = \I u$.
Such functions are equivalently sections of a line bundle over
the base $\R^3 \setminus \{x_i\}$, carrying a canonical connection,
and the Cauchy-Riemann equations take a nice form in terms of this line
bundle. Similarly $v$ will be a section of the dual line bundle,
locally of the form $v = g(x) e^{-\I \chi}$).
\end{exercise}


\subsection{Semiflat metrics}

Now we start considering more interesting torus fibrations.
The \hk metrics we describe below appeared first in
\cite{Cecotti:1989qn}; see also \cite{Freed:1997dp}
for a more mathematically oriented exposition,
and closely related discussion in \cite{Hitchin:2005uu}.

\begin{example}[Semiflat metric in one dimension, trivially fibered] \label{exa:semiflat-1d}
This is a generalization of \autoref{exa:R2T2} to allow a
bundle of tori, with varying modulus.

Fix a $1$-dimensional complex manifold $\cB$
and holomorphic functions 
\begin{equation}
  Z_{A,B}: \cB \to \C
\end{equation}
such that the quantity
\begin{equation}
  \tau = \frac{\de Z_B}{\de Z_A}
\end{equation}
is valued in the upper half-plane.
Then let $X$ be $\cB \times T^2$, with $T^2$
coordinatized by $\theta_{A,B} \in \R / 2 \pi \Z$.
Finally, just as in \autoref{exa:R2T2}, define functions
$\cX_{A,B}: X \to \C^\times$ by
\begin{equation}
  \cX_{A,B} = \exp \left(\zeta^{-1} Z_{A,B} + \I \theta_{A,B} + \zeta \bar{Z}_{A,B} \right),
\end{equation}
and for any $\zeta \in \C^\times$ 
define $\Omega(\zeta) \in \Omega^2_\C(X)$ by
\begin{equation}
  \frac{\de \cX_A \wedge \de \cX_B}{\cX_A \cX_B} = -\I \Omega(\zeta).
\end{equation}
To recover \autoref{exa:R2T2}, take $\cB = \C$, 
$Z_A = z$, $Z_B = \tau z$.
\end{example}

\begin{exercise} \label{exc:semiflat-1d-hk} Show that there is a \hk structure on the 
space $X$ in \autoref{exa:semiflat-1d}, with holomorphic symplectic
form $\Omega(\zeta)$. 
(Hint: since we know $\Omega(\zeta)$ concretely, we can compute
directly what the $\omega_i$ and $g$ must be. What is not immediately
obvious is that they obey the necessary algebraic relations to
give a \hk metric. You could verify this directly, but 
you can also obtain it as a consequence of the twistor
reconstruction, \autoref{thm:hk-twistor-construction}: then all you 
have to do is construct $\cZ$ with the required structures.
The tricky point is the condition on normal bundles: what does
it mean concretely about the functions $\cX_{A,B}$?)
\end{exercise}

\begin{exercise} This is a continuation of
\autoref{exc:semiflat-1d-hk}, but actually it can be done independently, 
\ti{assuming} the result of that exercise.
Compute the symplectic forms $\omega_i$ and the metric $g$.
What can you say about the complex manifold $(X,I_1)$?
Show that the group $U(1) \times U(1)$ acts
by triholomorphic isometries on $X$ (translations on
the torus fibers.)
\end{exercise}

\begin{exercise} Consider again the \hk manifold from 
\autoref{exc:semiflat-1d-hk}. Choose a contractible patch 
$W \subset \cB$
on which the function $Z_A$ is injective. Using $Z_A$ to
embed $W \hookrightarrow \C$, we can view $U = W \times \R$ as a subset
of $\C \times \R \simeq \R^3$. Then the function $V = \im \tau$ is
a positive harmonic function on $U$. We can thus consider the
Gibbons-Hawking space (\autoref{exa:incomplete-gibbons-hawking})
associated to this data. It has translation invariance in 
the $\R$ direction. Show that the \hk manifold from 
\autoref{exc:semiflat-1d-hk} is isomorphic to the quotient 
of this Gibbons-Hawking space by $\Z \subset \R$.
\end{exercise}

\begin{example}[Semiflat metric in one dimension, nontrivially fibered] \label{exa:semiflat-1d-general}
Here is a further generalization of \autoref{exa:semiflat-1d},
to allow a torus \ti{bundle} with nontrivial monodromy.
The notation needed to take care of this monodromy 
makes things look considerably more complicated,
but the local geometry is exactly
the same as \autoref{exa:semiflat-1d}.

We again fix a 1-dimensional complex manifold $\cB$.
Now we also fix a local system $\Gamma$ of rank $2$ lattices
over $\cB$, equipped with an antisymmetric integer-valued pairing
\begin{equation}
 \IP{\cdot, \cdot}: \Gamma \times \Gamma \to \Z
\end{equation}
and a map 
\begin{equation}
  Z: \Gamma \to \C
\end{equation}
such that:
\begin{itemize}
\item $Z$ is a homomorphism on each fiber --- i.e. for each 
point $u \in \cB$, we get a homomorphism $Z(u): \Gamma_u \to \C$,
\item $Z$ is holomorphic, if we equip $\Gamma$ with the complex
structure it acquires as a covering space of $\cB$. (Said otherwise: if 
we choose a section $\gamma$ of $\Gamma$ over some 
patch $U \subset \cB$, then $Z$ induces a function $Z_\gamma: U \to \C$,
and the condition is that this function should always be holomorphic.)
\item Choosing a local basis
$\{\gamma_1,\gamma_2\}$ with $\IP{\gamma_1,\gamma_2} = 1$,
the $2$-form
\begin{equation}
\omega = \de Z_{\gamma_2} \wedge \de \bar{Z}_{\gamma_1} - \de Z_{\gamma_1} \wedge \de \bar{Z}_{\gamma_2}
\end{equation}
is \ti{positive}.
\end{itemize}
(To recover \autoref{exa:semiflat-1d}, take $\Gamma$ to be the
trivial local system with fiber $\Z^2$, and then for 
$\gamma = (a,b)$ take $Z_\gamma = a Z_A + b Z_B$.)

Now define a torus bundle over $\cB$ by
\begin{equation}
  X = \Hom(\Gamma, U(1)),
\end{equation}
i.e. the fiber of $X$ over $u \in \cB$ is $\Hom(\Gamma_u, U(1))$,
which is indeed a torus $(S^1)^2$.
Given a local section $\gamma$ of $\Gamma$ over a patch
$U \subset \cB$, we have the evaluation map
\begin{equation}
  \varphi_\gamma: X \vert_U \to U(1).
\end{equation}
Then finally we define a map
\begin{equation}
  \cX: \Gamma \times \C^\times \to \C^\times
\end{equation}
by
\begin{equation}
  \cX_\gamma = \exp \left(\zeta^{-1} Z_\gamma + \zeta\bar{Z}_\gamma \right) \varphi_\gamma.
\end{equation}
Fixing a local section $\gamma$ of $\Gamma$ over $U \subset \cB$,
this gives a function
\begin{equation}
  \cX_\gamma: U \times \C^\times \to \C^\times
\end{equation}
Now fix a local basis $\{\gamma_1, \gamma_2\}$ of $\Gamma$
over $U \subset \cB$, with $\IP{\gamma_1,\gamma_2} = 1$,
and finally define $\Omega(\zeta) \in \Omega^2_\C(X\vert_U)$
by
\begin{equation}
  \Omega(\zeta) = \I \frac{\de \cX_{\gamma_1}(\zeta) \wedge \de \cX_{\gamma_2}(\zeta)}{\cX_{\gamma_1}(\zeta) \cX_{\gamma_2}(\zeta)}.
\end{equation}
Although we defined it over a patch $U \subset \cB$,
the $\Omega$ obtained is independent of the choice of
basis $\{\gamma_1,\gamma_2\}$, and thus it extends to a form
$\Omega(\zeta) \in \Omega^2_\C(X)$.
We can write it more compactly as
\begin{equation}
  \Omega(\zeta) = \I \DIP{\de \log \cX(\zeta), \de \log \cX(\zeta)}
\end{equation}
where $\DIP{\cdot,\cdot}$ denotes the inverse pairing,
$\Gamma^* \times \Gamma^* \to \Z$, and we think of
$\de \log \cX(\zeta)$ as a 1-form valued in $\Gamma^*$.
\end{example}

\begin{exercise} Show that the $2$-form $\Omega(\zeta)$ in
\autoref{exa:semiflat-1d-general} is the holomorphic symplectic
form for a \hk structure on $X$. Compute the symplectic forms
$\omega_i$ and the \hk metric $g$.
(The computation needed here should be almost 
identical to the one in \autoref{exc:semiflat-1d-hk}).
Show that each fiber of the 
projection to $\cB$ is a flat torus. (This is the reason why
this metric is called ``semiflat.'')
\end{exercise}
This \hk structure does
not have a global $U(1) \times U(1)$ action, but it does have
it \ti{locally}, i.e. on patches where $\Gamma$ can be trivialized.


\subsection{The Ooguri-Vafa space}

So far we have considered
honest torus fibrations. Now we move on to the first example 
where we have \ti{singular} fibers.

\begin{example}[Ooguri-Vafa space] \label{exa:ooguri-vafa} \cite{OV1996} 
We return to the Gibbons-Hawking
ansatz, \autoref{exa:gibbons-hawking}. The idea is to make a circle
bundle with a $\Z$ shift symmetry; then on dividing out by the $\Z$
action we will get a $T^2$ bundle. The simplest thing to try
would be to take the 1-dimensional lattice of points
\begin{equation}
  x_n = (n,0,0) \in \R^3
\end{equation}
and then take $V$ to be
\begin{equation}
 \sum_{n \in \Z} \frac{1}{4\pi\norm{x-x_n}}.
\end{equation}
However there is a difficulty: for large enough $n$
we have
\begin{equation}
  \frac{1}{4 \pi \norm{x-x_n}} \approx \frac{1}{4 \pi \abs{n}}
\end{equation}
and thus this sum is logarithmically divergent. We
can remove this divergence by ``subtracting an infinite constant'',
i.e. we define
\begin{equation} \label{eq:ooguri-vafa-V}
  V = \frac{1}{4 \pi \norm{x}} + \sum_{n \neq 0 \in \Z} \left( \frac{1}{4\pi\norm{x-x_n}} - \frac{1}{4\pi\abs{n}} \right) + C
\end{equation}
where $C$ is any constant.
Now the divergence problem is cured, but at the price of
losing the positivity when we are far from the lattice.
To get an idea of the difficulty, recall the 
coordinate $z = z_1 = x_2 + \I x_3$,
and consider the limit of large $\abs{z}$: here
we may replace the sum of point sources $\sum \delta(x-x_n)$
by a continuous string source $\delta(z) \de x_1$, where now
$\delta$ denotes the \ti{two}-dimensional delta function.
\insfig{higgs-bundles-11}{1.1}
The resulting $V$ obeys a two-dimensional Laplace equation,
\begin{equation}
  \Delta V = -\delta(z).
\end{equation} 
Thus for large $\abs{z}$ (much larger than $1$) we expect
\begin{equation}
  V \approx -\frac{1}{2\pi} \log \abs{z} + C' + C
\end{equation}
for some constant $C'$.
This expectation can be made rigorous using the Poisson summation formula, which gives in fact
\begin{equation} \label{eq:V-ooguri-vafa-resummed}
  V = -\frac{1}{2\pi} \log \abs{z/\Lambda} + \frac{1}{\pi} \sum_{n=1}^\infty \cos (2 \pi n x_1) K_0(2 \pi n \abs{z})
\end{equation}
where $\Lambda = 2 e^{-\gamma+2 \pi C}$, $\gamma$ is Euler's constant,
and $K_0$ is the modified Bessel function. This function has asymptotics
$K_0(M) \sim \sqrt\frac{\pi}{2M} e^{-M}$, so each term in the 
sum is exponentially small for large $\abs{z}$.
Dropping these exponentially suppressed terms we get
\begin{equation}  \label{eq:ooguri-vafa-V-approx}
  V \approx V^\sf = -\frac{1}{2\pi} \log \abs{z/\Lambda}.
\end{equation}

Let us briefly consider the Gibbons-Hawking metric
where $V$ is \ti{exactly} given by
$V^\sf$ of \eqref{eq:ooguri-vafa-V-approx} (i.e. we consider the
``approximation'' where we drop the sum in \eqref{eq:V-ooguri-vafa-resummed}.)
For $\abs{z} \ge \Lambda$
we will not have $V > 0$, so the biggest base we can take is 
\begin{equation}
U = \{\abs{z} < \Lambda \} \times \R. 
\end{equation}
The resulting Gibbons-Hawking metric $g^\sf$ is
invariant under continuous translations 
in the $x_1$ direction, $x_1 \to x_1 + \alpha$ for any $\alpha \in \R$. 
In particular, it is invariant under the discrete subgroup
$\Z \subset \R$
acting by $x_1 \to x_1 + n$.
After dividing out by this action $g^\sf$ descends to
one of the semiflat metrics of \autoref{exa:semiflat-1d-general}, torus
fibered over the punctured disc $0 < \abs{z} < \Lambda$:
see \autoref{exc:ooguri-vafa-semiflat} below.
However, this quotient metric seems very unlikely to admit a reasonable
extension over $z = 0$.

The Gibbons-Hawking metric $g$ obtained from the full $V$ 
of \eqref{eq:ooguri-vafa-V} rather than $V^\sf$ 
shares the bad large-$\abs{z}$ behavior
of the approximate one. Indeed, when $1 \ll \abs{z} < \Lambda$,
$g$ is very well approximated by $g^\sf$.
At small $\abs{z}$, though, the behavior of $g$ is much better than that
of $g^\sf$: it is smooth. 
$g$ is not invariant under continuous translations in 
the $x_1$ direction, but does still have the discrete $\Z$ 
symmetry $x_1 \to x_1 + n$, preserving
the \hk structure.\footnote{There is a subtle choice here:
the $\Z$ action on the base has to be lifted to the total space
of the $U(1)$ bundle $X$, and there are a circle's worth of ways
to do this. Thus the Ooguri-Vafa metric depends on two parameters:
the real parameter $C$ in \eqref{eq:ooguri-vafa-V} --- which we have 
absorbed into $\Lambda$ --- and also a circle-valued
parameter controlling this gluing. It is actually natural to combine
these into a single \ti{complex} parameter $\Lambda$; this is the
point of view taken in \cite{Gaiotto:2008cd}.}
After dividing out by this $\Z$ action we obtain a \hk 
space $X$, the Ooguri-Vafa manifold. Crucially, the Ooguri-Vafa
manifold and its \hk structure \ti{do} extend smoothly over $z=0$, since near
the singularities of $V$ we have the usual behavior
$V \sim \frac{1}{4 \pi r}$ as in \autoref{exa:gibbons-hawking}.

As usual for Gibbons-Hawking spaces, 
in complex structure $I_1$, $X$ has the holomorphic function $z$. 
The fiber of $X$ over a generic $z$ is a compact complex torus (circle
fibration over a circle), while over $z=0$ we get a singular
fiber (torus with a node, aka ``ordinary double point,'' a place
which looks locally like the locus $\{xy=0\} \subset \C^2$.)

\end{example}

\insfig{higgs-bundles-8}{0.92}

\begin{exercise} \label{exc:ooguri-vafa-semiflat} Let $X$ be the Gibbons-Hawking
\hk manifold with $V$ given by \eqref{eq:ooguri-vafa-V-approx}.
Verify that $X / \Z$ is an example of a semiflat metric as in 
\autoref{exa:semiflat-1d-general}, where the base $\cB$ is the 
punctured disc $0 < \abs{z} < \Lambda$, and $\Gamma$ is a rank $2$
local system of lattices, whose monodromy around $z=0$
is given by
$\begin{pmatrix} 1 & 1 \\ 0 & 1 \end{pmatrix} \in SL(2,\Z)$.
What is the map $Z$?
\end{exercise}

\begin{exercise} \label{exc:ooguri-vafa-holomorphic-discs} \cite{ovmh} Let $X$ be the Ooguri-Vafa space.
Show that there is an $I_\zeta$-holomorphic disc in $X$
with boundary on the torus fiber over $z$, if and 
only if $\zeta = \pm z / \abs{z}$. (Hint: to see that the disc \ti{does}
exist, you can construct it directly, along the lines of our 
earlier constructions of holomorphic spheres in Gibbons-Hawking spaces; 
to see that it \ti{doesn't} exist,
use the fact that the integral of $\Omega(\zeta)$ over such 
a disc would have to vanish.)
\end{exercise}

\begin{exercise} Use the Poisson summation formula to verify
\eqref{eq:V-ooguri-vafa-resummed}. \fixme{warning, this is hard}
\end{exercise}

\begin{example}[Twistor description of Ooguri-Vafa space]
As with our previous examples, we may ask: what are the holomorphic
functions on $X$ in complex structure $I_\zeta$?
One global holomorphic function is easy to construct: it is
\begin{equation}
  \cX_1 = \exp \left(\zeta^{-1} z + \I x_1 + \zeta \bar{z}\right).
\end{equation}
To get a second coordinate is considerably more difficult.
If we wanted to get a function on the \ti{approximate}
Ooguri-Vafa space with $V = V^\sf$, 
we could use the function written 
in \autoref{exa:semiflat-1d-general},
\begin{equation} \label{eq:Xsf-ooguri-vafa}
  \cX_2^{\sf} = \exp \left(\zeta^{-1} Z_2 + \I \chi + \zeta \bar{Z}_2 \right),
\end{equation}
where
\begin{equation}
  Z_2 = \frac{1}{2 \pi \I} (z \log (z/\Lambda) - z).
\end{equation}
The formula \eqref{eq:Xsf-ooguri-vafa} does not define a global
function on $X$, for two reasons: first, $\chi$ is only a \ti{local} fiber
coordinate; second, $Z_2$ is multivalued because of the logarithm.
We choose the principal branch of the logarithm, so that there
is a cut at $z / \Lambda \in \R_-$, and also take a trivialization
of the circle bundle defining $X$ on the complement of this cut.
It is possible to choose this trivialization in such a way that
when we cross the cut we get $\chi \to \chi + x_1$.
With these choices made, \eqref{eq:Xsf-ooguri-vafa} defines
an honest function on the complement of the cut, and crossing
the cut leads to the jumps $Z_2 \to Z_2 + z$ and $\chi \to \chi + x_1$,
which combine to give $\cX_2^\sf \to \cX_2^\sf \cX_1$.
(Compare the result of \autoref{exc:ooguri-vafa-semiflat}.)

The function $\cX_2^\sf$ is \ti{not} holomorphic on the
full Ooguri-Vafa space, with the full $V$.
However it turns out that we can
find a true holomorphic function $\cX_2$ which has the same \ti{asymptotic}
behavior as $\cX_2^\sf$ as we take $\zeta \to 0$ or $\zeta\to\infty$.
Namely we write
\begin{equation}
  \cX_2 = \cX_2^{\sf} \cX_2^{\inst}
\end{equation}
where the ``correction'' is
\begin{align} \label{eq:Xinst-ooguri-vafa}
  \cX_2^\inst(\zeta) = \exp & \left[ \frac{\I}{4 \pi} \int_{\ell_+} \frac{\de \zeta'}{\zeta'} \frac{\zeta' + \zeta}{\zeta' - \zeta} \log(1 - \cX_1(\zeta')) \right. \\
  - & \left. \frac{\I}{4 \pi} \int_{\ell_-} \frac{\de \zeta'}{\zeta'} \frac{\zeta' + \zeta}{\zeta' - \zeta} \log(1 - \cX_1(\zeta')^{-1}) \right],
\end{align}
with 
\begin{equation}
  \ell_\pm = \{ \pm z/\zeta' \in \R_- \}.
\end{equation}
Note that the integrals indeed converge, because of our careful choice
of the integration contours.

What is surprising here is that $\cX_2$ given by this strange formula
is actually an $I_\zeta$-holomorphic function on $X$.
To see that this is indeed true,
one can compute directly that the
holomorphic symplectic form \eqref{eq:hol-symp-family}
is given by
\begin{equation} \label{eq:hol-symp-ooguri-vafa}
  \Omega(\zeta) = \I \frac{\de \cX_1(\zeta) \wedge \de \cX_2(\zeta)}{\cX_1(\zeta) \cX_2(\zeta)}.
\end{equation}
This computation can be found in \cite{Gaiotto:2008cd}, or try it yourself ---
the idea is that even though the integrals \eqref{eq:Xinst-ooguri-vafa} cannot
be evaluated in closed form, once we plug into \eqref{eq:hol-symp-ooguri-vafa}
and Fourier expand in $e^{\I x_1}$ we obtain integrals which \ti{can} be done,
producing Bessel functions which eventually get matched to those appearing
in \eqref{eq:V-ooguri-vafa-resummed}.

A tricky aspect of this story is that the function $\cX_2$ is 
actually only \ti{piecewise} holomorphic. Indeed, the integrals
in \eqref{eq:Xinst-ooguri-vafa} are not defined when $\zeta \in \ell_\pm$.
One can however see that the \ti{limits} from the two sides exist, 
\begin{equation}
  \cX_2^\pm(\zeta) = \lim_{\eps \to 0^\pm} \cX_2(\zeta \e^{\I \eps}),
\end{equation}
by deforming the contour of integration so that it lies along
$\ell_\pm$ except for a little ``detour'' around $\zeta$.
\insfig{higgs-bundles-9}{0.8}
Thus the two limits differ by the integral around the pole
at $\zeta = \zeta'$, which can be evaluated by the residue theorem,
giving the jump formulas
\begin{align}
  \cX_2^+(\zeta) &= \cX_2^-(\zeta)(1 - \cX_1(\zeta))^{-1} \text{ for } \zeta \in \ell_+, \label{eq:ooguri-vafa-cluster-1} \\
  \cX_2^+(\zeta) &= \cX_2^-(\zeta)(1 - \cX_1(\zeta)^{-1}) \text{ for } \zeta \in \ell_-. \label{eq:ooguri-vafa-cluster-2}
\end{align}
Fortunately the holomorphic symplectic form \eqref{eq:hol-symp-ooguri-vafa} 
is still smooth --- 
thus, despite the fact that $\cX_2$ has this
discontinuity, the pair of holomorphic functions 
$(\cX_1, \cX_2)$ is perfectly good for 
the purpose of constructing the twistor space.

$\cX_2^\inst$ is bounded as $\zeta \to 0$ and $\zeta \to \infty$.
Thus the asymptotics of $\cX_2$ are essentially the 
same as those of $\cX_2^\sf$, as we wanted.

\end{example}


Let us briefly comment on the relation of this example to mirror symmetry.
For any fixed $\zeta$, the space $(X,I_\zeta)$
has two open domains $\im(z / \zeta) > 0$ and $\im(z / \zeta) < 0$. 
In each of these domains
we have a pair of holomorphic coordinates $(\cX_1, \cX_2)$, which moreover
are Darboux coordinates in the sense of \eqref{eq:hol-symp-ooguri-vafa}.
These coordinates can be analytically continued beyond their respective
domains, and on the overlaps the analytic continuations differ by the
jumps \eqref{eq:ooguri-vafa-cluster-1}, \eqref{eq:ooguri-vafa-cluster-2}.
This kind of description of the space $X$ is reminiscent of a general
approach for constructing Calabi-Yau manifolds by gluing
together tori $(\C^\times)^{2n}$, employed by
Kontsevich-Soibelman, Gross-Siebert, Auroux, Gross-Hacking-Keel.
In that approach the gluing maps are supposed to be related to
holomorphic discs on a mirror manifold. In the present example
the mirror manifold is just $X$ again, and the holomorphic discs
in question are the ones in \autoref{exc:ooguri-vafa-holomorphic-discs}.
\fixme{watch out for factors of $\I$}

One of the important features of the Ooguri-Vafa space is that
it describes the local geometry near singular fibers of more interesting
elliptically fibered \hk spaces; but more precisely we need a slight
generalization for this purpose:

\begin{defn}[Generalized Ooguri-Vafa space] \label{exa:gen-ooguri-vafa}
We reconsider \autoref{exa:ooguri-vafa} with a slight modification:
instead of adding just a \ti{constant} to $V$ we allow something 
more general, replacing \eqref{eq:ooguri-vafa-V}
by 
\begin{equation} \label{eq:gen-ooguri-vafa-V}
  V = \frac{1}{4 \pi \norm{x}} + \sum_{n \neq 0 \in \Z} \left( \frac{1}{4\pi\norm{x-x_n}} - \frac{1}{4\pi\abs{n}} \right) + f
\end{equation}
where $f$ is any smooth harmonic function which is invariant under the
shift $x_3 \to x_3 + 1$. All of the constructions
in \autoref{exa:ooguri-vafa} then go through as 
before and give
a \hk metric which is torus fibered over some disc in the complex plane,
with one nodal fiber.
\end{defn}

\subsection{Differential geometry of \hk manifolds}

\begin{prop}[\Hk manifolds are Ricci-flat] \label{prop:hk-ricci-flat}
If $X$ is a \hk manifold,
then the \hk metric $g$ is Ricci-flat.
\end{prop}
\begin{pf} View $X$ as a
\kahler manifold in structure $I_1$, with $\dim_\C X = n$. 
The canonical bundle $K_X = \wedge^n (T^*)^{1,0} X$
with its induced Levi-Civita connection
admits the global covariantly constant section $\Omega_1$,
so its curvature is zero; thus, by 
\autoref{prop:ricci-form-canonical}, $Ric = 0$.
\end{pf}

\autoref{prop:hk-ricci-flat} suggests one possible strategy
for constructing examples of \hk structures: first construct
a Ricci-flat \kahler metric and then try to prove it is actually
part of an \hk structure. To implement this strategy the next
theorem is the key tool.

\begin{thm}[Yau's theorem: existence of Ricci-flat \kahler metrics] \label{thm:yau-ricci-flat-kahler}
\cite{yau-thm} Suppose that:
\begin{itemize}
  \item $X$ is a compact complex manifold,
  \item the canonical bundle $K_X$ is trivial (as a complex line bundle),
  \item $\alpha \in H^2_{dR}(X)$ is a \kahler class, 
i.e. there exists some \kahler metric on $X$ with $[\omega] = \alpha$.
\end{itemize}
Then there exists a unique Ricci-flat \kahler metric on $X$ 
with $[\omega] = \alpha$.
\end{thm}

Note that \autoref{thm:yau-ricci-flat-kahler} 
is not explicit: it
guarantees the existence of \ti{some} Ricci-flat metric but
tells us relatively little about what that metric actually is.
A nice sketch of the proof can be found in \cite{Joyce}.

\begin{thm}[Compact, \kahler, uniquely holomorphic symplectic manifolds are uniquely \hk] \label{thm:hol-symp-is-hk}
Suppose that:
\begin{itemize}
  \item $X$ is a compact complex manifold,
  \item the space of holomorphic symplectic forms on $X$ is 1-complex-dimensional, spanned by $\Omega \in \Omega^{2,0}(X)$,
  \item $\alpha \in H^2_{dR}(X)$ is a \kahler class, 
i.e. there exists some \kahler metric on $X$ with $[\omega] = \alpha$.
\end{itemize}
Then there exists a unique \hk structure $(X,I_1,I_2,I_3,g)$ such that
$[\omega_1] = \alpha$, $I_1$ is the given complex structure on $X$, 
and $\omega_2 + \I \omega_3 = c \Omega$ for some $c \in \R$.
\end{thm}

\begin{pf} Since $\Omega^n$ is a nowhere vanishing 
holomorphic section of the canonical bundle $K_X$, 
we have $c_1(X) = 0$; thus we can use
\autoref{thm:yau-ricci-flat-kahler}
to conclude that there exists a unique Ricci-flat \kahler
metric $g$ on $X$ with $[\omega] = \alpha$.
Now let $I_1$ be the given complex structure on $X$,
and $\omega_1 = \omega$.
What we need to show is 
that $g$ is actually a \hk metric.

First we use the ``Bochner principle'' which says that holomorphic
objects on Ricci-flat compact manifolds are covariantly constant. More precisely:
let $\IP{\cdot,\cdot}$ denote the $L^2$ inner product on $\Omega^*(X)$ or 
$\Omega^*(X) \otimes TX$. Recall 
the $\bar\partial$-Laplacian
\begin{equation}
  \Delta_{\bar \partial} = \bar\partial \bar\partial^* + \bar\partial^* \bar\partial,
\end{equation}
which has in particular $\Delta_{\bar \partial} \Omega = 0$ (trivially, since
$\bar\partial^* \Omega = 0$ for degree reasons.)
A Weitzenbock formula (see \cite{MR2325093} for a proof), plus the fact that 
$Ric = 0$, gives a simple relation between this and the covariant Laplacian:
\begin{equation}
\Delta_{\bar\partial} = \nabla^* \nabla.
\end{equation}
Thus we have
\begin{equation}
  0 = \IP{\Omega, \Delta_{\bar \partial} \Omega} = \IP{\nabla\Omega,\nabla\Omega},
\end{equation}
so $\nabla \Omega = 0$. 
% Thus, if we define
% \begin{equation}
%   c = \frac{\omega_1^{2n}}{(\Omega \wedge \bar\Omega)^n},
% \end{equation}
% $c$ is a constant. 

Now define $\omega_2$ and $\omega_3$ by
$\omega_2 + \I \omega_3 = \Omega$, and define
$I_2 = g^{-1} \omega_2$, $I_3 = g^{-1} \omega_3$.
It is straightforward to show $I_2 I_1 = -I_3$, $I_3 I_1 = I_2$;
also $\Omega g^{-1} \Omega = 0$, so
$(I_2 + \I I_3)^2 = 0$, so $I_2^2 = I_3^2$ and
$I_2 I_3 = -I_3 I_2$.
Moreover, by construction $I_2$ is skew-symmetric with
respect to an orthogonal basis, since its matrix in such 
a basis is just the matrix of $\omega_2$.
Using the structure theorem 
for skew-symmetric matrices, it follows that in some 
orthogonal basis $I_2$ is a direct sum of blocks
$\begin{pmatrix} 0 & c_i \\ -c_i & 0 \end{pmatrix}$ with all $c_i > 0$.
All that remains is to show that all of the $c_i$
appearing in this decomposition are equal;
then by an overall rescaling of $\omega_2$
and $\omega_3$ we can arrange they are all $1$,
which completes the proof.

So, suppose that the $c_i$ are not all equal.
Then decompose $TX$ into blocks $E_i$ labeled by
the distinct $c_i$. Evidently the $E_i$ are preserved
by $I_2$, and $E_i$ can be characterized as the $-c_i^2$
eigenspace of $I_2^2$. 
We have a similar block decomposition for the
action of $I_3$, and since $I_3^2 = I_2^2$, the blocks 
must coincide. So the $E_i$ are also preserved by $I_3$.
Then using $I_2^2 I_1 = -I_2 I_3$ they are also 
preserved by $I_1$.
Moreover, since $I_2$ is covariantly constant,
the $E_i$ are also preserved by parallel transport.
But in this case we can construct a covariantly constant endomorphism
of $TX$ which acts by a different constant on each $E_i$, and
thus commutes with $I_1$.
Then applying this endomorphism to $\Omega$
we would get other holomorphic symplectic forms on $X$,
violating our assumption.
\end{pf}

\begin{example}[Elliptically fibered K3 surface] \label{exa:elliptically-fibered-k3}
Now let's construct a \hk space with torus fibers over the \ti{compact}
base $\C\PP^1$. The idea: for each $u \in \C\PP^1$ we will write
\begin{equation} \label{eq:X-u}
  X_u = \{ y^2 z = x^3 + A(u) xz^2 + B(u) z^3 \} \subset \C\PP^2,
\end{equation}
and let $X$ be the union of the $X_u$.

We want $X$ to carry a global holomorphic $2$-form. How can we make it?
On each fiber $X_u$ we have the holomorphic $1$-form $\de x / y$. 
We want to wedge this with
a holomorphic $1$-form coming from the base. Such a $1$-form 
doesn't literally exist, because $K_{\C\PP^1} \simeq \cO(-2)$; but there is
a nowhere vanishing \ti{twisted} $1$-form,
\begin{equation}
  \eta \in H^0(K_{\C\PP^1} \otimes \cO(2)).
\end{equation}
Our desired holomorphic symplectic form will be
\begin{equation}
  \Omega = \eta \wedge \frac{\de x}{y}.
\end{equation}
For this to make global sense, $\de x/y$ needs to be
valued in $\cO(-2)$. Also, for the equation \eqref{eq:X-u}
to make sense, $y^2 z$ and $x^3$ must be valued in the same place.
To make all this work, we make $x$ valued in $\cO(4)$, $y$ in $\cO(6)$,
and $z$ in $\cO(0)$. Then $A(u)$ must be a (fixed) section of $\cO(8)$
and $B(u)$ a section of $\cO(12)$.
Finally we define:\footnote{What the notation $\PP[\cO(4) \oplus \cO(6) \oplus \cO(0)]$ means: we take the locus where $x$, $y$, $z$ don't 
simultaneously vanish, then quotient by simultaneous rescalings 
$(x,y,z) \to (\lambda x, \lambda y, \lambda z)$ with $\lambda \in \C^\times$; 
this defines a bundle over $\C\PP^1$ with each fiber isomorphic to $\C\PP^2$.}
\begin{equation}
  X = \{ y^2 z = x^3 + A(u) xz^2 + B(u) z^3 \} \subset \PP[\cO(4) \oplus \cO(6) \oplus \cO(0)] \to \C\PP^1
\end{equation}
The fiber $X_u$ is \ti{smooth} as long as the polynomial
$x^3 + A(u) x + B(u)$ doesn't have any double zeroes in $x$,
i.e. as long as the discriminant
\begin{equation}
  \Delta(u) = 27 B(u)^2 + 4 A(u)^3
\end{equation}
does not vanish. Since $\Delta$ is a section of $\cO(24)$,
if it has no multiple zeroes we get $24$ singular fibers. 
To look more closely at the singular fibers, note that
at each of them we have $A(u) \neq 0$ and $B(u) \neq 0$
(otherwise $\Delta$ would have a higher-order zero at $u$).
Thus the singular fiber is of the form
\begin{equation}
  \{ y^2 z = x^3 + A x z^2 + B z^3 \} \subset \C\PP^2
\end{equation}
with $A, B \neq 0$ and $27B^2 - 4A^3 = 0$. This
gives a nodal torus (like the one in the Ooguri-Vafa space.)
It is straightforward moreover to check that if $\Delta$ has no multiple zeroes
then the total space of $X$ is smooth.
It carries the holomorphic symplectic form $\Omega$.
Finally, $X$ is \kahler. \fixme{simple proof? add \kahler
form coming from $\C\PP^2$ fibers to ones coming from base?}
Thus by \autoref{thm:hol-symp-is-hk}, $X$ admits \hk metrics.

We have obtained a family of \hk manifolds: one for each
$(A(u),B(u),\alpha)$, where
$A(u) \in H^0(\cO(8))$, $B(u) \in H^0(\cO(12))$ 
are such that $\Delta(u)$ has only
simple zeroes, and $\alpha$ is a \kahler class.

As we vary $A(u)$, $B(u)$
and $\alpha$
the diffeomorphism type of the space does not change, so we could think 
of this as a family of \hk structures on a single smooth manifold. 
Most of the complex structures on this smooth manifold are \ti{not} of the
type we constructed here: indeed most of them are not even algebraic.
\end{example}

\begin{exercise} Check that the $1$-form $\de x / y$ is
holomorphic on the curve \eqref{eq:X-u}.
\end{exercise}

\begin{exercise} Check that if $\Delta$ has no multiple
zeroes then $X$ is smooth.
\end{exercise}

In general, Yau's Theorem gives very little by way of explicit information
about the Ricci-flat metrics it provides. In the case of the K3 surface
we have at least some \ti{asymptotic} information, thanks to the work
of Gross-Wilson \cite{MR1863732}. 
\ti{Very roughly} this says the following.
Fix an elliptically fibered K3 surface $X$ as in 
\autoref{exa:elliptically-fibered-k3}. The base $\C\PP^1$
has a natural \kahler metric.
Moreover there exists a family
of \kahler classes $\alpha(R) \in H^{1,1}_\R(X)$, 
parameterized by $R \in \R_+$, such that the corresponding \hk metrics
$g(R)$ can be described concretely: 
\begin{equation}
    g(R) \approx g_{app}(R) + O(e^{-M R})
\end{equation} 
where $M$ is controlled by the distance between the singular fibers,
and $g_{app}(R)$ are obtained by
taking generalized Ooguri-Vafa metrics (\autoref{exa:gen-ooguri-vafa})
in small discs around the $24$ singular fibers and gluing them to
semiflat metrics (\autoref{exa:semiflat-1d-general})
on the rest of $X$ --- where the holomorphic data $Z_\gamma$ entering
the semiflat metric
are certain periods of the holomorphic symplectic form 
$R \Omega$ --- and then dividing by $R^2$. 
Then the torus fibers of $g(R)$ have
area $4 \pi^2 / R^2$. As $R \to \infty$ these metrics 
have a Gromov-Hausdorff limit,
in which the torus fibers collapse onto the \kahler base $\C\PP^1$.



\subsection{\Hk quotients}

\begin{defn}[\Hk moment map] Suppose $X$ is \hk and a compact group
$G$ acts on $X$ by isometries preserving the \hk structure.
Then a \ti{\hk moment map} for this action is a map
\begin{equation}
  \vec\mu = (\mu_1, \mu_2, \mu_3): X \to \fg^* \otimes \R^3
\end{equation}
where $\mu_i$ is a moment map for the action with respect
to $\omega_i$.
\end{defn}

\begin{exercise} Suppose $\vec\mu$ is a \hk moment map as above.
Then for $\vec s \in S^2$, defining
\begin{equation}
  \mu_{\vec s}: X \to \fg^*
\end{equation}
by
\begin{equation}
  \mu_{\vec s} = \vec\mu \cdot \vec s
\end{equation}
show that $\mu_{\vec s}$ is a moment map for the action 
with respect to $\omega_{\vec s}$.
\end{exercise}

\begin{exercise} Suppose
$X$ is a Gibbons-Hawking space as in \autoref{exa:gibbons-hawking}.
Then $X$ has a $U(1)$ action by isometries
preserving the \hk structure and also has a projection $X \to \R^3$.
Show that this projection is a \hk moment map for the $U(1)$ action
(when we identify $\fu(1) \simeq \R$ as usual).
\end{exercise}

\begin{defn}[\Hk quotient] Suppose $X$ is \hk and a compact group
$G$ acts on $X$, with \hk moment map $\mu$.
Then the \ti{\hk quotient}
of $X$ by $G$ is
\begin{equation}
  X \hkq G = \vec\mu^{-1}(0) / G.
\end{equation}
\end{defn}

\begin{thm}[\Hk quotients are \hk] \label{thm:hk-quotients-are-hk} 
Suppose $X$ is \hk and a
compact group $G$ acts on $X$, with \hk moment map $\mu$.
Also suppose $G$ acts freely on
$\vec \mu^{-1}(0)$. Then $X \hkq G$ is a manifold, with
\begin{equation}
  \dim_\R (X \hkq G) = \dim_\R X - 4 \dim_\R G,
\end{equation}
and the quotient metric on $X \hkq G$ is \hk.
\end{thm}
\begin{pf} First we show that if $G$ acts freely on 
$\vec\mu^{-1}(0)$ then $0$ is a regular value
for $\vec\mu$. 

To show $\de\vec\mu$ surjective
it is sufficient to show that the equation
\begin{equation}
  \de \mu_1 \cdot Z_1 + \de \mu_2 \cdot Z_2 + \de \mu_3 \cdot Z_3 = 0
\end{equation}
implies $Z_1 = Z_2 = Z_3 = 0$.
We may rewrite this as
\begin{equation}
  \iota_{\rho(Z_1)} \omega_1 + \iota_{\rho(Z_2)} \omega_2 + \iota_{\rho(Z_3)} \omega_3 = 0
\end{equation}
which in turn is equivalent to
\begin{equation}
  I_1 \rho(Z_1) + I_2 \rho(Z_2) + I_3 \rho(Z_3) = 0.
\end{equation}
To show this implies $Z_1 = Z_2 = Z_3 = 0$ is the content of \autoref{exc:quat-linear-indep} below. Using this result, we get that $0$ is indeed a regular
 value for $\vec\mu$, so $\vec\mu^{-1}(0)$ is a manifold.

Now, consider the function 
\begin{equation}
 M_1 = \mu_2 + \I \mu_3: X \to \fg_\C. 
\end{equation}
For any $Z \in \fg$ we have
\begin{equation}
\de M_1 \cdot Z = \iota_{\rho(Z)}(\omega_2 + \I \omega_3) = \iota_{\rho(Z)} \Omega_1 \in \Omega^{1,0}(X),
\end{equation} 
so $M_1$ is holomorphic.
Thus $Y = M_1^{-1}(0)$ is an $I_1$-complex
submanifold, hence in particular \kahler for $\omega_1$. Moreover $G$ acts on $Y$
preserving $\omega_1$, with moment map $\mu_1$,
and we have 
\begin{equation}
 X \hkq G = \vec\mu^{-1}(0) / G = (M_1^{-1}(0) \cap \mu_1^{-1}(0)) / G = Y \kq G.
\end{equation}
Thus by \autoref{prop:kahler-quotients-are-kahler}, $I_1$ descends 
to the quotient $X \hkq G$, and the
quotient metric on $X \hkq G$ is \kahler for $I_1$.
Similarly it is \kahler for $I_2$, $I_3$.
\end{pf}

\begin{exercise} \label{exc:quat-linear-indep}
Suppose $V$ is a quaternionic vector space, with a compatible metric 
and a real subspace $W \subset V$, such that
$I_i W$ is orthogonal to $W$ for $i = 1,2,3$.
Suppose also
\begin{equation}
 w_0 + I_1 w_1 + I_2 w_2 + I_3 w_3 = 0, \qquad w_i \in W.
\end{equation}
Then show that $w_0 = w_1 = w_2 = w_3 = 0$.
\end{exercise}

The idea of \autoref{thm:hk-quotients-are-hk} is 
that the single \hk quotient space can be realized as a \kahler 
quotient in many different ways. There is also yet another way to think of
it, using the fact that the \kahler quotient is (ignoring issues of stability)
a quotient by a complexification $G_\C$. Thus modulo stability we have
\begin{equation}
  X \hkq G = M_1^{-1}(0) / G_\C = X \kq G_\C
\end{equation}
i.e. it looks like $X \hkq G$ is a \ti{holomorphic symplectic} version 
of the symplectic quotient. This point of view is useful for 
constructing the twistor space of $X \hkq G$: it arises
as a \ti{fiberwise} version of the holomorphic symplectic quotient,
i.e. (again ignoring issues of stability)
\begin{equation}
  \cZ(X \hkq G) = \cZ(X) \kq G_\C.
\end{equation}

\begin{example}[Hyperkahler quotient of $\bbH$ by $U(1)$]
Suppose $X = \bbH$ with its standard \hk structure, and the standard
$U(1) \subset SU(2)_R$ action from \autoref{exc:R4-moment-maps}.
It follows from the result of \autoref{exc:R4-moment-maps}
that for any choice of $\vec\mu$, $\vec\mu^{-1}(0)$ is a circle,
and thus $\bbH \hkq U(1)$ is a point.

Let us look in more detail at how this goes.
We have the moment maps
\begin{align}
  \mu_{1} &= \half (\abs{w}^2 - \abs{z}^2) + c, \\
  M_1 = \mu_{2} + \I \mu_{3} &= -\I w z + \alpha,
\end{align}
for constants $c \in \R$ and $\alpha \in \C$.
We want to determine $\vec\mu^{-1}(0)$. Setting $M_1 = 0$
means
\begin{equation} \label{eq:H-complex-mm}
 wz = - \I \alpha 
\end{equation}
Assuming $\alpha \neq 0$ for a moment,
this gives a $\C^\times$ parameterized by say $w$,
with $z = - \I \alpha / w$. Now we consider the condition
$\mu_1 = 0$: this says
\begin{equation} \label{eq:H-real-mm}
  0 = \half\left(\abs{w}^2 - \frac{\abs{\alpha}^2}{\abs{w}^2}\right) + c
\end{equation}
which has a single positive solution for $\abs{w}^2$, irrespective of
the value of $c$. Thus $\vec\mu^{-1}(0)$ is a circle, parameterized
by the phase of $w$. Finally dividing out by $U(1)$ gives a single point,
so in this case we got $\bbH \hkq U(1) = \{ pt \}$.

If $\alpha = 0$ the story looks a little different: the condition 
\eqref{eq:H-complex-mm} says 
\begin{equation}
wz = 0,
\end{equation}
and the condition $\mu_1 = 0$ becomes
\begin{equation}
  \abs{w}^2 - \abs{z}^2 = - 2c.
\end{equation}
So if $c > 0$ we get $w = 0$, $\abs{z} = \sqrt{2c}$, and dividing out by $U(1)$
gives a point as before. Similarly if $c < 0$ we get $z = 0$, $\abs{w} = \sqrt{2c}$,
and dividing out by $U(1)$
gives a point. If $c = 0$ then we are in the singular situation $w = z = 0$,
so $U(1)$ does not act freely.

Thus altogether we have found that if $(\alpha,c) \neq (0,0)$ we have
$\bbH \hkq U(1) = \{ pt \}$, and if $(\alpha,c) = (0,0)$, $U(1)$ does not
act freely on $\vec\mu^{-1}(0)$. (It happens that we get a point anyway,
but morally speaking we should consider this as a singular situation, where
we would not expect to get a manifold.)

Note that although the analysis looks different for $\alpha \neq 0$
and $\alpha = 0, c \neq 0$ the eventual conclusion is the same.

\insfig{higgs-bundles-12}{1.15}

This is as we should expect: $(\alpha, c)$ are just different components
of a single \hk moment map, and could be rotated into one another by action of $SU(2)_R$.
Said otherwise, the analysis looks unsymmetric only because we chose to work in the
complex coordinates given by the arbitrarily-chosen complex structure $I_1$.

Finally note that the ``hard'' part in this example was solving the real
equation \eqref{eq:H-real-mm} which came from $\mu_1 = 0$. If we are only
interested in getting the quotient as a complex manifold in structure $I_1$,
we could try to sidestep this problem by looking instead at
$M_1^{-1}(0) / \C^\times$, which modulo problems of stability is supposed
to be equal to the desired $\bbH \hkq U(1)$. For $\alpha \neq 0$, 
$M_1^{-1}(0)$ is $\{ zw = - \I \alpha \}$, a single $\C^\times$-orbit,
which indeed is stable (it intersects the locus $\mu_1 = 0$).
For $\alpha = 0$ it's trickier: the locus $zw = 0$ contains two
$\C^\times$-orbits --- one open and one just the point $z = w = 0$. 
For $c \neq 0$ the open orbit is stable;
for $c = 0$ the point orbit is stable, but $U(1)$ doesn't act freely
there.

\end{example}

\begin{example}[Modifying \hk manifolds with $U(1)$ symmetry] \label{exa:modifying-hk-with-circle} \cite{modif-hk}
Suppose $X$ is any \hk manifold with a $U(1)$ action by triholomorphic
isometries, with a moment map $\vec\mu_X$. Then we can consider 
\begin{equation}
X' = X \times \bbH.  
\end{equation}
Putting our standard $U(1) \subset SU(2)_R$ action on $\bbH$, with
its standard moment map $\vec\mu_{\bbH}$, we get a diagonal $U(1)$
action on $X'$, with moment map
\begin{equation}
  \vec\mu = \vec\mu_X + \vec\mu_{\bbH}.
\end{equation}
Note the $U(1)$ action is free except at points $(x,0)$
where $x \in X$ is a fixed point of the $U(1)$ action there.
Thus provided we choose $\vec\mu_X$ so that it does not vanish
at these points $x$, the \hk quotient
\begin{equation}
  Y = X' \hkq U(1)
\end{equation}
is a \hk manifold, of the same dimension as $X$. We think of it
as a \ti{modification} of $X$.
\end{example}

\begin{example}[Multi-Eguchi-Hanson spaces as \hk quotients]
Take $X = \bbH^{n}$. 
In structure $I_1$, $X$ is naturally identified with
$\C^{2n}$ with coordinates $(z_1, w_1, \dots, z_{n}, w_{n})$.
It has a triholomorphic $U(1)^{n}$ action (coming from $SU(2)_R$ action on 
each factor), acting by $z_i \to e^{\I \alpha_i} z_i$,
$w_i \to e^{-\I \alpha_i} w_i$, which has the standard moment map 
$X \to \R^3 \otimes_\R \fu(1)^{n+1} \simeq \R^{3n}$.
% , given by
% \begin{align}
%   \mu_{i,1} &= \half (\abs{w_i}^2 - \abs{z_i}^2), \\
%   \mu_{i,2} + \I \mu_{i,3} &= -\I w_i z_i.
% \end{align}
Now consider the ``center of mass'' subgroup $G \subset U(1)^{n}$
given by the condition $\prod_i g_i = 1$.
We have $G \simeq U(1)^{n-1}$.
Choose a tuple $x = (x_1, \dots, x_n) \in \R^3$. The tuple
$(x_1, \dots, x_n)$ gives an element of $\fg^*$.
Now we consider the \hk quotient
\begin{equation}
  Y = X \hkql{{x}} G.
\end{equation}
We claim this quotient is a multi-Eguchi-Hanson space
as in \autoref{exa:multi-eguchi-hanson}, with $n$ singularities
at the positions $x_i$.

To describe this we take the quotient at the level of the twistor space.
Beginning from the $\cO(1)$-valued coordinates $z_i$, $w_i$
on $\bbH^n$, the desired coordinates are the $(\C^\times)^n$-invariant combinations $u = \prod z_i$ and $v = \prod w_i$ plus the holomorphic moment 
map $\eta$ for the surviving diagonal $\C^\times$ action, and the moment 
map conditions imply
$uv = \prod \eta - \eta_i$ as desired.

\fixme{explain how?}

\end{example}


\section{Moduli of bundles}

From now on we fix a compact Riemann surface $C$, with 
a \kahler metric, of total area $1$.

We are going to define a moduli space $\uharm_{K,d}(C)$ parameterizing
equivalence classes of ``stable'' holomorphic bundles over $C$ of 
rank $K$ and degree $d$. Moreover this space is naturally 
\kahler (where it is smooth).

Although we will not use this fact, $\uharm_{K,d}(C)$ is actually
algebraic. For those who are algebraically inclined, a 
very nice introductory reference to this 
material is \cite{MR98b:14010}. The notes 
\cite{MR2408226} also appear very good.


\subsection{Stable vector bundles}

\begin{defn}[Degree of a vector bundle] The \ti{degree} of a 
complex vector bundle $E$ over $C$ is
\begin{equation}
  \deg E = c_1(E) \cdot [C] \in \Z,
\end{equation}
where $c_1(E) \in H^2(C,\Z)$ denotes the first Chern class,
and $[C] \in H_0(C,\Z)$ the fundamental class.
\end{defn}

\begin{prop}[Chern-Weil formula for degree] \label{prop:chern-weil-degree}
\begin{equation}
  \deg E = \frac{1}{2 \pi} \int_C \Tr F_D
\end{equation}
where $F_D \in \Omega^2(\End E)$ is the curvature of any
connection $D$ in $E$.
\end{prop}

In practice \autoref{prop:chern-weil-degree} is what we will use.
The only reason we do not adopt this as the definition is that
it does not make immediately manifest the fact that $\deg E$ is an 
\ti{integer}.

Another interpretation of the degree which is useful for developing 
intuition is:
\begin{prop} Suppose $E$ is a complex vector bundle over $C$, of rank $K$.
Fix sections $e_1, \dots, e_K$ of $E$ which are transverse in the sense
that they give a trivialization of $E$ away from finitely many points
$z_i \in C$. Let $a_i \in \Z$ denote the winding
number of the determinant $\det(e_1, \dots, e_K)$ evaluated 
on a small circle around $z_i$ (measured relative to a local trivialization
of $E$ which extends over $z_i$). Then
\begin{equation}
  \deg E = \sum_i a_i.
\end{equation}
In particular, if $E$ is a holomorphic line bundle, choose a meromorphic
section $e$ of $E$, and then $\deg E$ is the number of zeroes of $e$
minus the number of poles (counted with multiplicity.)
\end{prop}

\begin{exercise} Show that the line bundle $\cO(n)$ over $\C\PP^1$
has degree $n$.
\end{exercise}

\begin{defn}[Slope of a vector bundle] The \ti{slope} of a holomorphic vector bundle $E$ over $C$ is
\begin{equation}
  \mu(E) = \frac{\deg E}{\rank E}.
\end{equation}
\end{defn}

\begin{defn}[Stable holomorphic vector bundle] A holomorphic vector bundle $E$ over $C$ is called:
\begin{itemize}
\item \ti{stable} if, for every holomorphic subbundle $E' \subset E$,
we have $\mu(E') < \mu(E)$,
\item \ti{semistable} if, for every holomorphic subbundle 
$E' \subset E$, we have $\mu(E') \le \mu(E)$,
\item \ti{unstable} otherwise.
\end{itemize}
\end{defn}

\begin{exercise} \label{exc:coprime-semistable-is-stable} 
Show that if $(K,d) = 1$ then every semistable bundle of rank $K$
and degree $d$ is stable.
\end{exercise}


\begin{example}[Stability for bundles over $\C\PP^1$]
Grothendieck's lemma says that all holomorphic vector 
bundles over $\C\PP^1$ are direct sums of line bundles,
$E = \bigoplus_{i=1}^K \cO(n_i)$, and moreover that
two such sums are isomorphic only if they include the
same $n_i$.
The slope of such a bundle is the average of the $n_i$,
\begin{equation}
\mu(E) = \frac{\sum n_i}{K}.  
\end{equation}
Thus $E$ is unstable unless
all $n_i$ are equal; if all $n_i$ are equal it is
semistable; it is stable only if $K=1$.
Note that semistable bundles of degree $d$ and rank $K$ exist
if and only if $K \vert d$, $K > 1$.
\end{example}

\begin{example}[Instability of $\cO(-1) \oplus \cO(1)$]
What does it mean to say that the bundle $\cO(-1) \oplus \cO(1)$
is unstable? One way to think of it is to consider a certain
$1$-parameter family of vector bundles $E_t$, obtained
as \ti{extensions}
\begin{equation}
  0 \to \cO(-1) \to E_t \to \cO(1) \to 0,
\end{equation}
parameterized by classes $t \in H^1(\cO(-2)) \simeq \C$.
Concretely what this means is that we take the bundle
$\cO(-1) \oplus \cO(1)$ and modify its transition function
on the overlap between north-pole and south-pole patches
to
\begin{equation}
  \begin{pmatrix} z^{-1} & t \\ 0 & z \end{pmatrix}.
\end{equation}
For $t \neq 0$ we have $E_t \simeq \cO(0) \oplus \cO(0)$
while for $t = 0$ instead $E_t \simeq \cO(1) \oplus \cO(-1)$.
Thus we have the unstable bundle 
$\cO(1) \oplus \cO(-1)$
precisely at $t = 0$, which under the 
slightest perturbation ``decays'' to the semistable one
$\cO(0) \oplus \cO(0)$.

This means that if we naively try to construct a moduli space of bundles
over $\C\PP^1$ up to equivalence, any open set around the unstable
bundle $\cO(1) \oplus \cO(-1)$ necessarily contains $\cO(0) \oplus \cO(0)$,
i.e. the space would have to be non-Hausdorff.
\end{example}

\begin{exercise}
Check that indeed for $t \neq 0$ we have $E_t \simeq \cO(0) \oplus \cO(0)$.
Hint: use the fact that the transition matrix can be factorized into
one piece polynomial in $z$ and one piece polynomial in $z^{-1}$ 
(``Birkhoff factorization''),
\begin{equation}
   \begin{pmatrix} z^{-1} & t \\ 0 & z \end{pmatrix} = \begin{pmatrix} 0 & 1 \\ 1 & t^{-1}z \end{pmatrix} \begin{pmatrix} -t^{-1} & 0 \\ z^{-1} & t \end{pmatrix}.
\end{equation} 
\end{exercise}


\subsection{Moduli spaces}

\begin{prop}[Classification of complex vector bundles]
All rank $K$ complex vector bundles over $C$ of degree $d$ are equivalent.
\end{prop}

Thus, suppose we fix a single rank $K$ complex vector bundle $E$, 
of degree $d$; then every holomorphic vector bundle of rank $K$
and degree $d$ is equivalent to $(E, \bar\partial_E)$ for some
$\bar\partial_E$.

Let $\cA$ denote the space of all $\bar\partial_E$.
This is an affine space modeled on the infinite-dimensional 
complex linear space $\Omega^{0,1}(\End E)$.

The moduli space we want to describe could be thought of as
$\cA$ modulo equivalence --- where now ``equivalence'' means
the (infinite-dimensional,
complex) group $\fG_\C$ of sections of $GL(E)$,
which acts on $\cA$ by conjugation:
\begin{equation}
  D \mapsto D^g = g D g^{-1}.  
\end{equation}
So formally we want to say
\begin{equation} \label{eq:bunG-formal-quotient}
  \uharm_{K,d}(C) = \cA / \fG_\C.
\end{equation}

It is not so easy to make a ``nice'' space in this way.
The difficulty comes from the 
fact that $\fG_\C$ is a complex group.
(Of course $\fG_\C$ is also infinite-dimensional,
but that's not really the problem!)

One neat trick for getting around this problem, 
explained in \cite{MR85k:14006}, 
is to think of $\fG_\C$ as the complexification of a
group $\fG$ whose action is better controlled, and 
then interpret \eqref{eq:bunG-formal-quotient}
as a \kahler quotient (still infinite-dimensional.)
For this purpose, let us fix a Hermitian metric $h$ on $E$.
After so doing, we have an infinite-dimensional real group
$\fG$ of \ti{unitary} equivalences, i.e. sections of $U(E)$.
Let $\cA_h$ denote the space of all $h$-unitary connections
on $E$.

\begin{prop} $\cA \simeq \cA_h$.
\end{prop}
\begin{pf} Each $\bar\partial \in \cA$
can be extended in a canonical way to a unitary connection $D \in \cA_h$
(Chern connection), and conversely, each unitary connection $D \in \cA_h$ 
can be restricted to $\bar\partial_D \in \cA$.
\end{pf}

$\cA_h$ is an affine space, modeled
on the infinite-dimensional \ti{real} linear space $\Omega^{1}(\fu(E))$.
The compatibility of these two pictures 
is summarized in the next exercise:

\begin{exercise} Show that the real linear space 
$\Omega^{1}(\fu(E))$ carries a natural complex structure $I$,
and with this complex structure it is canonically identified
with the complex linear space $\Omega^{0,1}(\End E)$.
\end{exercise}

On $\Omega^{1}(\fu(E))$ we have a natural symplectic form
\fixme{some analytic niceties needed here}
\begin{equation}
  \omega(\alpha,\beta) = \int_C \Tr(\alpha \wedge \beta).
\end{equation}
So this gives a symplectic structure on $\cA_h$.

\begin{exercise} Verify that the complex and symplectic structures
on $\cA$ are compatible, i.e. $\omega(I \alpha, I \beta) = \omega(\alpha,\beta)$.
\end{exercise}
Thus $\cA$ is \kahler.
Moreover $\fG$ acts on $\cA$, by conjugation,
\begin{equation}
  D \mapsto D^g = g D g^{-1}.
\end{equation}

\begin{prop}[Moment map for $\fG$ action on $\cA$] \label{prop:unitary-connections-moment-map}
The action of $\fG$ on $\cA_h$ admits a moment map, given by
(in the sense of distributions)
\begin{equation}
  \mu(D) = F_D - 2 \pi \frac{d}{K} {\textbf 1} \omega_C 
\end{equation}
where $\omega_C$ denotes the \kahler form on $C$.
More precisely, this means: suppose given an element 
$Z \in \Lie \fG = \Omega^0(\fu(E))$,
then we have 
\begin{equation}
  \mu_Z(D) = \int_C \Tr(Z F_D) - 2 \pi \frac{d}{K} \int_C \omega_C \Tr(Z).
\end{equation}
\end{prop}

\begin{pf} The key facts are the action of 
$Z \in \Lie \fG = \Omega^0(\fu(E))$ by infinitesimal gauge transformation,
\begin{equation} \label{eq:inf-gauge}
  \rho(Z) = -DZ
\end{equation}
and the differential of $\mu_Z$, acting on a tangent vector
$\beta \in \Omega^1(\fu(E)) = T\cA_h$:
\begin{equation} \label{eq:diff-moment-map}
\de \mu_Z \cdot \beta = \int_C \Tr (Z \, D\beta).
\end{equation}
We compute
\begin{align}
  \omega(\rho(Z), \beta) &= -\int_C \Tr (DZ \wedge \beta) \\
  &= \int_C \Tr (Z \, D\beta) \\
  &= \de \mu_Z \cdot \beta.
\end{align}
\end{pf}

\begin{exercise}
Verify \eqref{eq:inf-gauge} and \eqref{eq:diff-moment-map}.
\end{exercise}

\currentposition

\autoref{prop:unitary-connections-moment-map} says in particular that 
$\mu^{-1}(0)$ is the subset of $\cA_h$
consisting of connections with
\begin{equation} \label{eq:harmonic-curvature}
  F_D = 2 \pi \frac{d}{K} {\mathbf 1} \omega_C.
\end{equation}
In the important special case $d=0$, \eqref{eq:harmonic-curvature}
just says that $D$ is a \ti{flat} connection.
For $d \neq 0$, \eqref{eq:harmonic-curvature} says at least that $D$ is
\ti{projectively} flat, i.e. it would descend to a flat connection 
on the bundle $\PP(E)$ of projective spaces, and moreover the remaining
central curvature is completely fixed.

We remark that $\omega_C$ is an arbitrary positive $2$-form 
on $C$ with total integral $1$.
At least formally we can imagine taking $\omega_C$ to be more and more 
concentrated at a single point $z_0$, until in the limit we get
$\omega_C = \delta(z_0)$. In this limit the connections $D$ obeying
\eqref{eq:harmonic-curvature} are becoming
flat away from $z_0$, but singular at $z_0$, with the holonomy around $z_0$
of finite order given by multiplication by the root of unity 
$e^{2 \pi \I d / K}$.

Following our plan, 
we want to take the symplectic quotient $\cA \kq \fG = \mu^{-1}(0) / G$.
As a technical preliminary we need to understand the extent to 
which $\fG$ acts freely on $\mu^{-1}(0)$.

\begin{defn}[Irreducible connections]
We call a unitary connection $D$ in $E$ \ti{irreducible} if there does not
exist any subbundle $E' \subset E$ such that $D$ preserves $E'$.
\end{defn}

\begin{prop}[Gauge group acts almost freely on irreducible connections]
If $g \in \fG$ and $D$ is an irreducible connection, then $D^g = D$
if and only if $g$ acts on $E$ by multiplication by a constant scalar.
\end{prop}
\begin{pf} $D^g = D$ if and only if $g$ is constant under the parallel 
transport of $D$. This means that $g$ is determined by
its value at a single point of $C$. Moreover this value cannot be arbitrary:
it has to commute with the parallel transport around any loop.
Thus if $g$ were not a constant its eigenspaces would be preserved by parallel 
transport, which would contradict the irreducibility of $D$.
\end{pf}

Let $\cA^s \subset \cA$ be the subset of irreducible
unitary connections.
Now we define:

\begin{defn}[Moduli spaces of unitary harmonic bundles]
\begin{equation}
  \uharm^s_{K,d}(C) = \cA^s \kql{c} \fG, \qquad \uharm_{K,d}(C) = \cA \kql{c} \fG.
\end{equation}
\end{defn}

Note that these are both infinite-dimensional quotients.
Nevertheless they still make sense, at least
as topological spaces. Now we will see that they have
much better structure.

\begin{prop}[Basic properties of $\uharm_{K,d}(C)$] 
We have the following.
\begin{itemize}
\item $\uharm^s_{K,d}(C)$ is a \kahler manifold, of complex dimension $(g-1)K^2+1$.
\item $\uharm_{K,d}(C)$ is compact.
\item For any $n \in \Z$,
\begin{equation}
\uharm^s_{K,d}(C) \simeq \uharm^s_{K,d+nK}(C), \qquad
\uharm_{K,d}(C) \simeq \uharm_{K,d+nK}(C).
\end{equation} 
\end{itemize}
\end{prop}

\begin{pf}
We have described $\uharm^s_{K,d}(C)$ as a symplectic quotient
by the group $\fG / \C^\times$, which acts freely (note that the moment 
map $\mu$ actually descends to this quotient!) Formally the tangent space
at a given flat connection $D$ should be the kernel of $\de \mu$ 
modulo $\rho(\Lie (\fG / \C^\times))$: in other words we want
the cohomology of the complex
\begin{equation}
  0 \to \Omega^0(\fu(E)) / \C \xrightarrow{D} \Omega^1(\fu(E)) \xrightarrow{D} \Omega^2(\fu(E)) \to 0
\end{equation}
at the middle position. (It's indeed a complex, 
because $D^2 = F_D = 2 \pi \frac{d}{K} {\mathbf 1} \omega_C$ \fixme{...} )
We have to pay proper respect to the fact that we are dealing here
with \ti{infinite-dimensional} spaces. Fortunately the complex
is \ti{elliptic}.\footnote{This means that the corresponding symbol
complex over $T^* C$ is exact off the zero section: indeed the symbol
is just wedging with $p$.} This means in particular that we get a good local
structure: the operator 
\begin{equation}
 \hat{D} = D \oplus D^*: \Omega^1 \to \Omega^2 \oplus \Omega^0 
\end{equation}
is \ti{Fredholm}, i.e. it has closed range, and finite-dimensional 
kernel and cokernel. The tangent space we are after is the kernel.
\fixme{index theorem}
\end{pf}

\begin{thm}[Narasimhan-Seshadri theorem for rank $1$]
Suppose $K=1$, so $E$ is a complex \ti{line} bundle of degree $d$,
and the stability condition is vacuous.
Then any point of $\cA$ lies in the $\fG_\C$-orbit of
$\bar\partial_D$ for a unique $[D] \in \uharm_{1,d}(C)$.
\end{thm}

\begin{pf} \fixme{abelian Hodge theory}
\end{pf}

\begin{thm}[Narasimhan-Seshadri theorem] \label{thm:narasimhan-seshadri}
For any $[D] \in \uharm^s_{K,d}(C)$ the $(0,1)$ part $\bar\partial_D$
induces the structure of \ti{stable} holomorphic vector bundle on $E$.
Conversely, any stable holomorphic structure 
on $E$ is equivalent to $\bar\partial_D$ for a unique $[D] \in \uharm^s_{K,d}(C)$.
\fixme{check!}
\end{thm}

\begin{pf} We just discuss the case $d=0$, and also just give a sketch,
lifted from \cite{MR710055}.

First suppose $[D] \in \uharm^s_{K,d}(C)$. Thus $D$
is an irreducible flat connection. Suppose that $E' \subset E$ is some
subbundle preserved by $\bar\partial_D$; we want to show that $\deg E' < 0$.
This is an instance of the general principle that ``curvature decreases
in holomorphic subbundles;'' for the relevant computation 
see e.g. \cite{MR95d:14001}.

Conversely suppose we have some $D$ such that $\bar\partial_D$ 
induces a stable holomorphic structure. Now we want to find a
\ti{flat} connection which induces the same holomorphic structure,
i.e. is in the same $\fG_\C$-orbit. Call this orbit $\cO$.
The idea is to consider the ``Yang-Mills functional''
given by the $L^2$ norm of $F_D$, 
\begin{equation}
 \norm{F}^2 = \int_C F \wedge \star F
\end{equation}
Suppose we work formally for a moment, avoiding questions of
smoothness etc.
And suppose we are at a minimum of $\norm{F_D}^2$ 
in $\cO$.
Then we can show that we must have $\norm{F_D}^2 = 0$ 
(else a gauge transformation with parameter $Z$ obeying
$\nabla^* \nabla Z = \star F_D$ would reduce 
$\norm{F_D}^2$.) So all we need to do is show that the
minimum of $\norm{F_D}^2$ is actually attained in $\cO$.

For this, the idea is to construct a convergent 
minimizing sequence of connections $F_D$, and then 
study the limiting connection. If it belongs to 
$\cO$ then we are done. If it doesn't, then we show
that the holomorphic bundle is actually unstable.
\fixme{remark on induction, rank 1 case}
\end{pf}

\printbibliography

\end{document}